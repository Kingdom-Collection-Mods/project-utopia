namespace = event_new_dawn

#New Dawn start
event_new_dawn.1 = {
	type = country_event

	event_image = {
		video = "unspecific_trains"
	}
	
	trigger = {
		NOT = { has_variable = event_new_dawn_started }
	}

	duration = 3

	placement = ROOT

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	title = event_new_dawn.1.t
	desc = event_new_dawn.1.d
	flavor = event_new_dawn.1.f
	
	immediate = {
		set_variable = event_new_dawn_started
	}

	option = {
		name = metro.1.a
		default_option = yes
	}
}

#New Dawn Winner in Power
event_new_dawn.2 = {
	type = country_event
	placement = ROOT
	title = french_pretenders.10.t
	desc = {
		first_valid = {
			triggered_desc = {
				desc = french_pretenders.10.d_1
				trigger = {
					je:je_ut_new_dawn = { 
						"scripted_bar_progress(ut_new_dawn_fascist_bar)" > "scripted_bar_progress(ut_new_dawn_democrat_bar)"
						"scripted_bar_progress(ut_new_dawn_fascist_bar)" > "scripted_bar_progress(ut_new_dawn_communist_bar)" 
						"scripted_bar_progress(ut_new_dawn_fascist_bar)" > "scripted_bar_progress(ut_new_dawn_autocrat_bar)"
					}
				}
			}
			triggered_desc = {
				desc = french_pretenders.10.d_2
				trigger = {
					je:je_ut_new_dawn = { 
						"scripted_bar_progress(ut_new_dawn_democrat_bar)" > "scripted_bar_progress(ut_new_dawn_communist_bar)"
						"scripted_bar_progress(ut_new_dawn_democrat_bar)" > "scripted_bar_progress(ut_new_dawn_fascist_bar)" 
						"scripted_bar_progress(ut_new_dawn_democrat_bar)" > "scripted_bar_progress(ut_new_dawn_autocrat_bar)"
					}
				}
			}
			triggered_desc = {
				desc = french_pretenders.10.d_3
				trigger = {
					je:je_ut_new_dawn = { 
						"scripted_bar_progress(ut_new_dawn_communist_bar)" > "scripted_bar_progress(ut_new_dawn_democrat_bar)"
						"scripted_bar_progress(ut_new_dawn_communist_bar)" > "scripted_bar_progress(ut_new_dawn_fascist_bar)" 
						"scripted_bar_progress(ut_new_dawn_communist_bar)" > "scripted_bar_progress(ut_new_dawn_autocrat_bar)"
					}
				}
			}
			triggered_desc = {
				desc = french_pretenders.10.d_4
				trigger = {
					je:je_ut_new_dawn = { 
						"scripted_bar_progress(ut_new_dawn_autocrat_bar)" > "scripted_bar_progress(ut_new_dawn_democrat_bar)"
						"scripted_bar_progress(ut_new_dawn_autocrat_bar)" > "scripted_bar_progress(ut_new_dawn_fascist_bar)"
						"scripted_bar_progress(ut_new_dawn_autocrat_bar)" > "scripted_bar_progress(ut_new_dawn_communist_bar)"
					}
				}
			}
		}
	}
	flavor = {
		first_valid = {
			triggered_desc = {
				desc = french_pretenders.10.f_1
				trigger = {
					je:je_ut_new_dawn = { 
						"scripted_bar_progress(ut_new_dawn_fascist_bar)" > "scripted_bar_progress(ut_new_dawn_democrat_bar)"
						"scripted_bar_progress(ut_new_dawn_fascist_bar)" > "scripted_bar_progress(ut_new_dawn_communist_bar)" 
						"scripted_bar_progress(ut_new_dawn_fascist_bar)" > "scripted_bar_progress(ut_new_dawn_autocrat_bar)"
					}
				}
			}
			triggered_desc = {
				desc = french_pretenders.10.f_2
				trigger = {
					je:je_ut_new_dawn = { 
						"scripted_bar_progress(ut_new_dawn_democrat_bar)" > "scripted_bar_progress(ut_new_dawn_communist_bar)"
						"scripted_bar_progress(ut_new_dawn_democrat_bar)" > "scripted_bar_progress(ut_new_dawn_fascist_bar)" 
						"scripted_bar_progress(ut_new_dawn_democrat_bar)" > "scripted_bar_progress(ut_new_dawn_autocrat_bar)"
					}
				}
			}
			triggered_desc = {
				desc = french_pretenders.10.f_3
				trigger = {
					je:je_ut_new_dawn = { 
						"scripted_bar_progress(ut_new_dawn_communist_bar)" > "scripted_bar_progress(ut_new_dawn_democrat_bar)"
						"scripted_bar_progress(ut_new_dawn_communist_bar)" > "scripted_bar_progress(ut_new_dawn_fascist_bar)" 
						"scripted_bar_progress(ut_new_dawn_communist_bar)" > "scripted_bar_progress(ut_new_dawn_autocrat_bar)"
					}
				}
			}
			triggered_desc = {
				desc = french_pretenders.10.f_4
				trigger = {
					je:je_ut_new_dawn = { 
						"scripted_bar_progress(ut_new_dawn_autocrat_bar)" > "scripted_bar_progress(ut_new_dawn_democrat_bar)"
						"scripted_bar_progress(ut_new_dawn_autocrat_bar)" > "scripted_bar_progress(ut_new_dawn_fascist_bar)"
						"scripted_bar_progress(ut_new_dawn_autocrat_bar)" > "scripted_bar_progress(ut_new_dawn_communist_bar)"
					}
				}
			}
		}
	}

	duration = 3

	icon = "gfx/interface/icons/event_icons/event_scales.dds"
	gui_window = event_window_1char_tabloid

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/misc/1Character_Banner"

	trigger = {
		# triggered by new dawn journal entry
	}

	cancellation_trigger = {
		always = no
	}

	immediate = {
		#set_variable = { name = pretender_enthroned_cooldown years = 1 }
		root = {
			save_scope_as = reflexive_reference_root
		}
		if = {
			limit = {
				je:je_ut_new_dawn = { 
					"scripted_bar_progress(ut_new_dawn_fascist_bar)" > "scripted_bar_progress(ut_new_dawn_democrat_bar)"
					"scripted_bar_progress(ut_new_dawn_fascist_bar)" > "scripted_bar_progress(ut_new_dawn_communist_bar)" 
					"scripted_bar_progress(ut_new_dawn_fascist_bar)" > "scripted_bar_progress(ut_new_dawn_autocrat_bar)"
				}
			}
			remove_variable = ut_new_dawn_core_democrat_var
			remove_variable = ut_new_dawn_core_communist_var
			remove_variable = ut_new_dawn_core_autocrat_var
			set_variable = {
				name = ut_new_dawn_core_fascist_var
			}
		}
		else_if = {
			limit = {
				je:je_ut_new_dawn = { 
					"scripted_bar_progress(ut_new_dawn_communist_bar)" > "scripted_bar_progress(ut_new_dawn_democrat_bar)"
					"scripted_bar_progress(ut_new_dawn_communist_bar)" > "scripted_bar_progress(ut_new_dawn_fascist_bar)" 
					"scripted_bar_progress(ut_new_dawn_communist_bar)" > "scripted_bar_progress(ut_new_dawn_autocrat_bar)"
				}
			}
			remove_variable = ut_new_dawn_core_fascist_var
			remove_variable = ut_new_dawn_core_democrat_var
			remove_variable = ut_new_dawn_core_autocrat_var
			set_variable = {
				name = ut_new_dawn_core_communist_var
			}
		}
		else_if = {
			limit = {
				je:je_ut_new_dawn = { 
					"scripted_bar_progress(ut_new_dawn_democrat_bar)" > "scripted_bar_progress(ut_new_dawn_communist_bar)"
					"scripted_bar_progress(ut_new_dawn_democrat_bar)" > "scripted_bar_progress(ut_new_dawn_fascist_bar)" 
					"scripted_bar_progress(ut_new_dawn_democrat_bar)" > "scripted_bar_progress(ut_new_dawn_autocrat_bar)"
				}
			}
			remove_variable = ut_new_dawn_core_fascist_var
			remove_variable = ut_new_dawn_core_communist_var
			remove_variable = ut_new_dawn_core_autocrat_var
			set_variable = {
				name = ut_new_dawn_core_democrat_var
			}
		}
		else_if = {
			limit = {
				je:je_ut_new_dawn = { 
					"scripted_bar_progress(ut_new_dawn_autocrat_bar)" > "scripted_bar_progress(ut_new_dawn_democrat_bar)"
					"scripted_bar_progress(ut_new_dawn_autocrat_bar)" > "scripted_bar_progress(ut_new_dawn_fascist_bar)"
					"scripted_bar_progress(ut_new_dawn_autocrat_bar)" > "scripted_bar_progress(ut_new_dawn_communist_bar)"
				}
			}
			remove_variable = ut_new_dawn_core_fascist_var
			remove_variable = ut_new_dawn_core_communist_var
			remove_variable = ut_new_dawn_core_democrat_var
			set_variable = {
				name = ut_new_dawn_core_autocrat_var
			}
		}
	}
}

#New Dawn Winner not in Power
event_new_dawn.3 = {
	type = country_event
	placement = ROOT
	title = event_new_dawn.3.t
	desc = {
		first_valid = {
			triggered_desc = {
				desc = event_new_dawn.3.d_1
				trigger = {
					je:je_ut_new_dawn = { 
						"scripted_bar_progress(ut_new_dawn_fascist_bar)" > "scripted_bar_progress(ut_new_dawn_democrat_bar)"
						"scripted_bar_progress(ut_new_dawn_fascist_bar)" > "scripted_bar_progress(ut_new_dawn_communist_bar)" 
						"scripted_bar_progress(ut_new_dawn_fascist_bar)" > "scripted_bar_progress(ut_new_dawn_autocrat_bar)"
					}
				}
			}
			triggered_desc = {
				desc = event_new_dawn.3.d_2
				trigger = {
					je:je_ut_new_dawn = { 
						"scripted_bar_progress(ut_new_dawn_democrat_bar)" > "scripted_bar_progress(ut_new_dawn_communist_bar)"
						"scripted_bar_progress(ut_new_dawn_democrat_bar)" > "scripted_bar_progress(ut_new_dawn_fascist_bar)" 
						"scripted_bar_progress(ut_new_dawn_democrat_bar)" > "scripted_bar_progress(ut_new_dawn_autocrat_bar)"
					}
				}
			}
			triggered_desc = {
				desc = event_new_dawn.3.d_3
				trigger = {
					je:je_ut_new_dawn = { 
						"scripted_bar_progress(ut_new_dawn_communist_bar)" > "scripted_bar_progress(ut_new_dawn_democrat_bar)"
						"scripted_bar_progress(ut_new_dawn_communist_bar)" > "scripted_bar_progress(ut_new_dawn_fascist_bar)" 
						"scripted_bar_progress(ut_new_dawn_communist_bar)" > "scripted_bar_progress(ut_new_dawn_autocrat_bar)"
					}
				}
			}
			
			triggered_desc = {
				desc = event_new_dawn.3.d_4
				trigger = {
					je:je_ut_new_dawn = { 
						"scripted_bar_progress(ut_new_dawn_autocrat_bar)" > "scripted_bar_progress(ut_new_dawn_democrat_bar)"
						"scripted_bar_progress(ut_new_dawn_autocrat_bar)" > "scripted_bar_progress(ut_new_dawn_fascist_bar)"
						"scripted_bar_progress(ut_new_dawn_autocrat_bar)" > "scripted_bar_progress(ut_new_dawn_communist_bar)"
					}
				}
			}
		}
	}
	flavor = {
		first_valid = {
			triggered_desc = {
				desc = event_new_dawn.3.f_1
				trigger = {
					je:je_ut_new_dawn = { 
						"scripted_bar_progress(ut_new_dawn_fascist_bar)" > "scripted_bar_progress(ut_new_dawn_democrat_bar)"
						"scripted_bar_progress(ut_new_dawn_fascist_bar)" > "scripted_bar_progress(ut_new_dawn_communist_bar)" 
						"scripted_bar_progress(ut_new_dawn_fascist_bar)" > "scripted_bar_progress(ut_new_dawn_autocrat_bar)"
					}
				}
			}
			triggered_desc = {
				desc = event_new_dawn.3.f_2
				trigger = {
					je:je_ut_new_dawn = { 
						"scripted_bar_progress(ut_new_dawn_democrat_bar)" > "scripted_bar_progress(ut_new_dawn_communist_bar)"
						"scripted_bar_progress(ut_new_dawn_democrat_bar)" > "scripted_bar_progress(ut_new_dawn_fascist_bar)" 
						"scripted_bar_progress(ut_new_dawn_democrat_bar)" > "scripted_bar_progress(ut_new_dawn_autocrat_bar)"
					}
				}
			}
			triggered_desc = {
				desc = event_new_dawn.3.f_3
				trigger = {
					je:je_ut_new_dawn = { 
						"scripted_bar_progress(ut_new_dawn_communist_bar)" > "scripted_bar_progress(ut_new_dawn_democrat_bar)"
						"scripted_bar_progress(ut_new_dawn_communist_bar)" > "scripted_bar_progress(ut_new_dawn_fascist_bar)" 
						"scripted_bar_progress(ut_new_dawn_communist_bar)" > "scripted_bar_progress(ut_new_dawn_autocrat_bar)"
					}
				}
			}
			triggered_desc = {
				desc = event_new_dawn.3.f_4
				trigger = {
					je:je_ut_new_dawn = {
						"scripted_bar_progress(ut_new_dawn_autocrat_bar)" > "scripted_bar_progress(ut_new_dawn_democrat_bar)"
						"scripted_bar_progress(ut_new_dawn_autocrat_bar)" > "scripted_bar_progress(ut_new_dawn_fascist_bar)"
						"scripted_bar_progress(ut_new_dawn_autocrat_bar)" > "scripted_bar_progress(ut_new_dawn_communist_bar)"
					}
				}
			}
		}
	}

	duration = 3

	icon = "gfx/interface/icons/event_icons/event_scales.dds"
	gui_window = event_window_1char_tabloid

	left_icon = scope:french_monarch_scope

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/misc/1Character_Banner"

	trigger = {
		# triggered by Divided Monarchy Journal Entry
	}

	cancellation_trigger = {
		always = no
	}

	immediate = {
		
	}
	option = {
		name = event_new_dawn.3.a # Long live the Orleanists!
		default_option = yes
		if = {
			limit = {
				je:je_ut_new_dawn = { 
					"scripted_bar_progress(ut_new_dawn_fascist_bar)" > "scripted_bar_progress(ut_new_dawn_democrat_bar)"
					"scripted_bar_progress(ut_new_dawn_fascist_bar)" > "scripted_bar_progress(ut_new_dawn_communist_bar)" 
					"scripted_bar_progress(ut_new_dawn_fascist_bar)" > "scripted_bar_progress(ut_new_dawn_autocrat_bar)"
				}
			}
			remove_variable = ut_new_dawn_core_democrat_var
			remove_variable = ut_new_dawn_core_communist_var
			remove_variable = ut_new_dawn_core_autocrat_var
			set_variable = {
				name = ut_new_dawn_core_fascist_var
			}
			custom_tooltip = {
				text = event_new_dawn.uprising.setback_fascist
			}
		}
		else_if = {
			limit = {
				je:je_ut_new_dawn = { 
					"scripted_bar_progress(ut_new_dawn_communist_bar)" > "scripted_bar_progress(ut_new_dawn_democrat_bar)"
					"scripted_bar_progress(ut_new_dawn_communist_bar)" > "scripted_bar_progress(ut_new_dawn_fascist_bar)" 
					"scripted_bar_progress(ut_new_dawn_communist_bar)" > "scripted_bar_progress(ut_new_dawn_autocrat_bar)"
				}
			}
			remove_variable = ut_new_dawn_core_fascist_var
			remove_variable = ut_new_dawn_core_democrat_var
			remove_variable = ut_new_dawn_core_autocrat_var
			set_variable = {
				name = ut_new_dawn_core_communist_var
			}
		}
		else_if = {
			limit = {
				je:je_ut_new_dawn = { 
					"scripted_bar_progress(ut_new_dawn_democrat_bar)" > "scripted_bar_progress(ut_new_dawn_communist_bar)"
					"scripted_bar_progress(ut_new_dawn_democrat_bar)" > "scripted_bar_progress(ut_new_dawn_fascist_bar)" 
					"scripted_bar_progress(ut_new_dawn_democrat_bar)" > "scripted_bar_progress(ut_new_dawn_autocrat_bar)"
				}
			}
			remove_variable = ut_new_dawn_core_fascist_var
			remove_variable = ut_new_dawn_core_communist_var
			remove_variable = ut_new_dawn_core_autocrat_var
			set_variable = {
				name = ut_new_dawn_core_democrat_var
			}
			
			add_journal_entry = {
				type = je_ut_new_dawn_democratic
			}
		}
		else_if = {
			limit = {
				je:je_ut_new_dawn = { 
					"scripted_bar_progress(ut_new_dawn_autocrat_bar)" > "scripted_bar_progress(ut_new_dawn_democrat_bar)"
					"scripted_bar_progress(ut_new_dawn_autocrat_bar)" > "scripted_bar_progress(ut_new_dawn_fascist_bar)"
					"scripted_bar_progress(ut_new_dawn_autocrat_bar)" > "scripted_bar_progress(ut_new_dawn_communist_bar)"
				}
			}
			remove_variable = ut_new_dawn_core_fascist_var
			remove_variable = ut_new_dawn_core_communist_var
			remove_variable = ut_new_dawn_core_democrat_var
			set_variable = {
				name = ut_new_dawn_core_autocrat_var
			}
		}
	}
	option = {
		name = event_new_dawn.3.b # suppress!
		trigger = {
			NOT = { has_variable = ut_new_dawn_core_suppressed_winner_1_var }
		}
		add_radicals = {
			value = 0.20
		}
		if = {
			limit = {
				je:je_ut_new_dawn = { 
					"scripted_bar_progress(ut_new_dawn_fascist_bar)" > "scripted_bar_progress(ut_new_dawn_democrat_bar)"
					"scripted_bar_progress(ut_new_dawn_fascist_bar)" > "scripted_bar_progress(ut_new_dawn_communist_bar)" 
					"scripted_bar_progress(ut_new_dawn_fascist_bar)" > "scripted_bar_progress(ut_new_dawn_autocrat_bar)"
				}
			}
			je:je_ut_new_dawn = {
				add_progress = { value = -120 name = ut_new_dawn_fascist_bar }
			}

			custom_tooltip = {
				text = event_new_dawn.uprising.setback_fascist
			}
		}
		else_if = {
			limit = {
				je:je_ut_new_dawn = { 
					"scripted_bar_progress(ut_new_dawn_communist_bar)" > "scripted_bar_progress(ut_new_dawn_democrat_bar)"
					"scripted_bar_progress(ut_new_dawn_communist_bar)" > "scripted_bar_progress(ut_new_dawn_fascist_bar)" 
					"scripted_bar_progress(ut_new_dawn_communist_bar)" > "scripted_bar_progress(ut_new_dawn_autocrat_bar)"
				}
			}
			
			je:je_ut_new_dawn = {
				add_progress = { value = -120 name = ut_new_dawn_communist_bar }
			}

			custom_tooltip = {
				text = event_new_dawn.uprising.setback_communist
			}
		}
		else_if = {
			limit = {
				je:je_ut_new_dawn = { 
					"scripted_bar_progress(ut_new_dawn_democrat_bar)" > "scripted_bar_progress(ut_new_dawn_communist_bar)"
					"scripted_bar_progress(ut_new_dawn_democrat_bar)" > "scripted_bar_progress(ut_new_dawn_fascist_bar)" 
					"scripted_bar_progress(ut_new_dawn_democrat_bar)" > "scripted_bar_progress(ut_new_dawn_autocrat_bar)"
				}
			}
			
			je:je_ut_new_dawn = {
				add_progress = { value = -120 name = ut_new_dawn_democrat_bar }	
			}

			custom_tooltip = {
				text = event_new_dawn.uprising.setback_democrat
			}
		}
		else_if = {
			limit = {
				je:je_ut_new_dawn = { 
					"scripted_bar_progress(ut_new_dawn_autocrat_bar)" > "scripted_bar_progress(ut_new_dawn_democrat_bar)"
					"scripted_bar_progress(ut_new_dawn_autocrat_bar)" > "scripted_bar_progress(ut_new_dawn_fascist_bar)"
					"scripted_bar_progress(ut_new_dawn_autocrat_bar)" > "scripted_bar_progress(ut_new_dawn_communist_bar)"
				}
			}
			je:je_ut_new_dawn = {
				add_progress = { value = -120 name = ut_new_dawn_autocrat_bar }	
			}
			custom_tooltip = {
				text = event_new_dawn.uprising.setback_autocrat
			}
		}
		custom_tooltip = {
			text = event_new_dawn.uprising.first_setback
		}
		set_variable = {
			name = ut_new_dawn_core_suppressed_winner_1_var
		}
		remove_variable = ut_new_dawn_bar_freeze
	}
}

#Interest Group Events Core Ideology
event_new_dawn.11 = {
	type = country_event
	placement = ROOT
	title = event_new_dawn.11.t
	desc = event_new_dawn.11.d_1

	duration = 3

	icon = "gfx/interface/icons/event_icons/event_scales.dds"
	gui_window = event_window_1char_tabloid

	left_icon = scope:french_monarch_scope

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/misc/1Character_Banner"

	trigger = {
		# triggered by Divided Monarchy Journal Entry
		NOT = { has_variable = event_new_dawn_11_done }
	}

	cancellation_trigger = {
		always = no
	}

	immediate = {
		set_variable = event_new_dawn_11_done
	}

	#Democrats
	option = {
		name = french_pretenders.1.a # Long live the Orleanists!s_variable = orleanist_restoration_var
		set_variable = ut_new_dawn_core_democrat_var
		random_list = {
			
		}
	}

	#Autocrats
	option = {
		name = french_pretenders.1.b # Long live the Orleanists!
		set_variable = ut_new_dawn_core_autocrat_var
	}

	option = {
		desc = event_new_dawn.11.random_decision
		random_list = {
			35 = {
				set_variable = { name = ut_new_dawn_petty_bourgeoisie_democrat_var }
			}
			35 = {
				set_variable = { name = ut_new_dawn_petty_bourgeoisie_fascist_var }
			}
			20 = {
				set_variable = { name = ut_new_dawn_petty_bourgeoisie_autocrat_var }
			}
			10 = {
				set_variable = { name = ut_new_dawn_petty_bourgeoisie_communist_var }
			}
		}
	}
}