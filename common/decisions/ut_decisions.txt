ut_tech_preview_cheat_research = {
	is_shown = {
		is_player = yes
		NOT = { has_global_variable = ut_tech_preview_cheat_disable }
	}

	possible = {
		is_player = yes
		NOT = { has_global_variable = ut_tech_preview_cheat_disable }
		NOT = { has_modifier = ut_tech_preview_cheat_research_modifier }
	}
	
	when_taken = {
		trigger_event = {
			id = utopia_mod.2
			popup = yes
		}
	}

	ai_chance = {
		value = 0
	}
}

ut_tech_preview_cheat_new_dawn = {
	is_shown = {
		is_player = yes
		NOT = { has_global_variable = ut_tech_preview_cheat_disable }
	}

	possible = {
		is_player = yes
		NOT = { has_global_variable = ut_tech_preview_cheat_disable }
	}
	
	when_taken = {
		if = {
			limit = {
				ut_new_dawn_has_core_trigger = yes
			}
			trigger_event = {
				id = event_new_dawn.999
				popup = yes
			}
		}
		else = {
			trigger_event = {
				id = event_new_dawn.998
				popup = yes
			}
		}
	}

	ai_chance = {
		value = 0
	}
}

ut_research_institute_found = {
	is_shown = {
		NOT = {
			has_variable = ut_research_institute_found_var
			has_variable = ut_research_institute_found_done
		}
	}

	possible = {
		OR = {
			has_technology_researched = electronics
			has_technology_researched = ut_military_complex
			has_technology_researched = compulsory_secondary_school			
		}
		produced_bureaucracy > 500
		any_scope_state = {
			is_incorporated = yes
			is_split_state = no
			ut_research_institute_site_building_trigger = yes
		}
		OR = {
			has_global_highest_innovation = yes
			country_rank >= rank_value:great_power
		}
	}

	when_taken = {
		set_variable = {
			name = ut_research_institute_found_var
			value = 0
		}
		add_modifier = {
			name = ut_research_institute_found_mod
			months = 36
		}
		add_journal_entry = {
			type = ut_je_research_institute_founding
		}
	}

	ai_chance = {
		value = 0
		if = {
			limit = { produced_bureaucracy > 2500 }
			add = 5
		}
		if = {
			limit = {
				produced_bureaucracy > 5000
				any_country = {
					is_ai = no
					has_variable = ut_research_institute_found_var
				}
			}
			add = 100
		}
		if = {
			limit = {
				gdp > 200000000 # 200 million
			}
			add = 50
		}
		if = {
			limit = {
				OR = {
					is_diplomatic_play_committed_participant = yes
					is_at_war = yes
				}
			}
			multiply = 0
		}
	}
}


ut_research_nuclear_power = {
	is_shown = {
		has_technology_researched = nuclear_power_research
		NOT = { has_technology_researched = nuclear_power }
		NOT = {
			has_variable = ut_research_nuclear_power_var
		}
	}

	possible = {
		produced_bureaucracy > 500
		has_variable = ut_research_institute_found_done
		has_technology_researched = nuclear_power_research
		any_scope_state = {
			is_incorporated = yes
			is_split_state = no
			any_scope_building = {
				is_building_type = building_power_plant
				level >= 20
			}
			any_scope_building = {
				is_building_type = building_ut_research_institute
			}
		}
		OR = {
			has_global_highest_innovation = yes
			any_scope_building = {
				is_building_type = building_rare_earths_mine
				level >= 1
				has_active_production_method = pm_rare_earths_two_mine
			}
		}
	}

	when_taken = {
		set_variable = {
			name = ut_research_nuclear_power_var
			value = 0
		}
		add_modifier = {
			name = ut_research_nuclear_power_mod
			months = 48
		}
		add_journal_entry = {
			type = ut_je_ut_research_nuclear_power
		}
	}

	ai_chance = {
		value = 0
		if = {
			limit = { produced_bureaucracy > 2500 }
			add = 5
		}
		if = {
			limit = {
				produced_bureaucracy > 5000
				any_country = {
					is_ai = no
					has_variable = skyscraper_var
				}
			}
			add = 50
		}
		if = {
			limit = {
				gdp > 200000000 # 200 million
			}
			add = 50
		}
		if = {
			limit = {
				OR = {
					is_diplomatic_play_committed_participant = yes
					is_at_war = yes
				}
			}
			multiply = 0
		}
	}
}

ut_nuclear_power_plant_location  = {
	is_shown = {
		has_technology_researched = nuclear_power
	}

	possible = {
		NOT = { has_variable = ut_nuclear_power_plant_location_selecting }
		any_scope_state = {
			is_incorporated = yes
			is_split_state = no
			
			any_scope_building = {
				is_building_type = building_ut_nuclear_power_plant_construction_site
				is_under_construction = no
			}
		}
		NOT = {
			has_journal_entry = ut_je_nuclear_power_plant_construction
		}
	}

	when_taken = {
		set_variable = ut_nuclear_power_plant_location_selecting
		trigger_event = {
			id = utopia_journal_prod.50
				popup = yes
		}
	}

	ai_chance = {
		value = 0
		if = {
			limit = { produced_bureaucracy > 2500 }
			add = 5
		}
		if = {
			limit = {
				produced_bureaucracy > 5000
				any_country = {
					is_ai = no
					has_variable = skyscraper_var
				}
			}
			add = 50
		}
		if = {
			limit = {
				OR = {
					is_diplomatic_play_committed_participant = yes
					is_at_war = yes
				}
			}
			multiply = 0
		}
	}
}

ut_research_high_tech_computers = {
	is_shown = {
		has_technology_researched = electronics
		NOT = {
			has_variable = ut_research_high_tech_computers_var
		}
	}

	possible = {
		produced_bureaucracy > 500
		has_variable = ut_research_institute_found_done
		has_technology_researched = computers
		any_scope_state = {
			is_incorporated = yes
			is_split_state = no
			any_scope_building = {
				is_building_type = building_computer_factory
				level >= 10
			}
			any_scope_building = {
				is_building_type = building_ut_research_institute
			}
		}
		OR = {
			has_global_highest_innovation = yes
			any_scope_building = {
				is_building_type = building_rare_earths_mine
				level >= 5
				has_active_production_method = pm_rare_earths_two_mine
			}
		}
	}

	when_taken = {
		set_variable = {
			name = ut_research_high_tech_computers_var
			value = 0
		}
		add_modifier = {
			name = ut_research_high_tech_computers_research_mod
			months = 48
		}
		add_journal_entry = {
			type = ut_je_ut_research_high_tech_computers_research
		}
	}

	ai_chance = {
		value = 0
		if = {
			limit = { produced_bureaucracy > 2500 }
			add = 5
		}
		if = {
			limit = {
				produced_bureaucracy > 5000
				any_country = {
					is_ai = no
					has_variable = skyscraper_var
				}
			}
			add = 50
		}
		if = {
			limit = {
				gdp > 400000000 # 200 million
			}
			add = 50
		}
		if = {
			limit = {
				OR = {
					is_diplomatic_play_committed_participant = yes
					is_at_war = yes
				}
			}
			multiply = 0
		}
	}
}

ut_lgbt_same_sex_unions = {
	is_shown = {
		has_law = law_type:law_lgbt_rights_3
	}

	possible = {
		NOT = { has_variable = ut_lgbt_same_sex_unions_var }
	}

	when_taken = {
		set_variable = {
			name = ut_lgbt_same_sex_unions_var
		}
	}

	ai_chance = {
		value = 0
	}
}

ut_lgbt_same_sex_marriage = {
	is_shown = {
		has_law = law_type:law_lgbt_rights_3
	}

	possible = {
		NOT = { has_variable = ut_lgbt_same_sex_marriage_var }
	}

	when_taken = {
		set_variable = {
			name = ut_lgbt_same_sex_marriage_var
		}
	}

	ai_chance = {
		value = 0
	}
}

ut_lgbt_sexual_self_determination = {
	is_shown = {
		has_law = law_type:law_lgbt_rights_3
	}

	possible = {
		NOT = { has_variable = ut_lgbt_sexual_self_determination_var }
	}

	when_taken = {
		set_variable = {
			name = ut_lgbt_sexual_self_determination_var
		}
	}

	ai_chance = {
		value = 0
	}
}

ut_law_tax_code_amend = {
	is_shown = {
		OR = {
			has_law_or_variant = law_type:law_graduated_taxation
			has_law_or_variant = law_type:ut_law_tax_code
		}
		NOT = { has_variable = ut_law_tax_code_amend_lock }
	}

	possible = {
		has_law_or_variant = law_type:ut_law_tax_code
		NOT = {
			has_modifier = ut_tax_code_changed
		}
	}

	when_taken = {
		set_variable = ut_law_tax_code_amend_lock
		trigger_event = {
			id = utopia_mod.3
				popup = yes
		}
	}

	ai_chance = {
		value = 0
	}
}

ut_communist_enact_law_variants = {
	is_shown = {
		OR = {
			has_variable = je_ut_communist_one_communist_party_done
			has_variable = je_ut_communist_world_revolution_done
		}
		has_law = law_type:law_council_republic
	}

	when_taken = {
		if = {
			limit = {
				has_variable = je_ut_communist_world_revolution_done
			}
			activate_law = law_type:ut_law_international_council
		}
		else_if = {
			limit = {
				has_variable = je_ut_communist_one_communist_party_done
			}
			activate_law = law_type:ut_law_council_presidium
		}
	}
	ai_chance = {
		value = 1
	}
}