je_ut_new_dawn = {
	icon = "gfx/interface/icons/new_dawn_icons/ut_new_dawn.dds"

	group = je_group_utopia
	

	is_shown_when_inactive = {
		OR = {
			is_player = yes
			has_variable = je_ut_new_dawn_major_power_influenced_var
			country_rank >= rank_value:great_power
			hidden_trigger = { has_variable = je_ut_new_dawn_activate_cheat_var }
		}
		# OR = {
		# 	ut_service_workers_possible = yes
		# 	hidden_trigger = { has_variable = je_ut_new_dawn_activate_cheat_var }
		# }
	}

	possible = {
		has_technology_researched = consumer_goods_main_analog
		OR = {
			custom_tooltip = {
				text = je_ut_new_dawn_global_started_tt
				has_global_variable = je_ut_new_dawn_global_started
			}
			OR = {
				has_technology_researched = heavy_machinery_era_analog
				has_technology_researched = consumer_goods_main_house_hold_electrical
				has_technology_researched = nuclear_power
				has_technology_researched = union_trade
				has_technology_researched = national_socialism
				has_technology_researched = emancipation_movement
				AND = {
					has_technology_researched = ut_military_complex
					has_technology_researched = ut_tank_diesel_engine
				}
			}
			hidden_trigger = { has_variable = je_ut_new_dawn_activate_cheat_var }
		}
	}

	modifiers_while_active = {
		new_dawn_mod
	}

	immediate = {
		custom_tooltip = je_ut_new_dawn_immediate_tt
		ut_set_new_dawn_variables = yes
		if = {
			limit = {
				NOT = { has_global_variable = je_ut_new_dawn_global_started }
			}
			set_global_variable = je_ut_new_dawn_global_started
			set_variable = je_ut_new_dawn_first_started
		}
	}

	scripted_button = ut_new_dawn_fascist_focus
	scripted_button = ut_new_dawn_autocrat_focus
	scripted_button = ut_new_dawn_democrat_focus
	scripted_button = ut_new_dawn_communist_focus

	scripted_progress_bar = ut_new_dawn_fascist_bar
	scripted_progress_bar = ut_new_dawn_autocrat_bar
	scripted_progress_bar = ut_new_dawn_democrat_bar #ut_new_dawn_democrat_bar
	scripted_progress_bar = ut_new_dawn_communist_bar

	complete = {
		custom_tooltip = {
			text = je_ut_new_dawn_condition_tt
			has_variable = je_ut_new_dawn_done #Can only ever complete upon finishing the Cement the Rightful ideology journal entry.
		}
	}

	on_complete = {
		custom_tooltip = {
			text = je_ut_new_dawn_effect_tt
			ut_clear_divided_new_dawn_variables = yes #Removes all variables used for math in this JE, to save memory and performance.
		}
	}

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = ut_new_dawn_democrat_status_je
				trigger = {	
					has_journal_entry = je_ut_new_dawn_democratic
				}
			}
			triggered_desc = { # In the lead and on the throne
				desc = ut_new_dawn_democrat_status
				trigger = {
					AND = {
						scope:journal_entry = { 
							"scripted_bar_progress(ut_new_dawn_democrat_bar)" > "scripted_bar_progress(ut_new_dawn_communist_bar)"
							"scripted_bar_progress(ut_new_dawn_democrat_bar)" > "scripted_bar_progress(ut_new_dawn_fascist_bar)" 
							"scripted_bar_progress(ut_new_dawn_democrat_bar)" > "scripted_bar_progress(ut_new_dawn_autocrat_bar)"
						}
					}
				}
			}
			triggered_desc = { # In the lead and on the throne
				desc = ut_new_dawn_fascist_status
				trigger = {
					AND = {
						scope:journal_entry = { 
							"scripted_bar_progress(ut_new_dawn_fascist_bar)" > "scripted_bar_progress(ut_new_dawn_communist_bar)"
							"scripted_bar_progress(ut_new_dawn_fascist_bar)" > "scripted_bar_progress(ut_new_dawn_democrat_bar)" 
							"scripted_bar_progress(ut_new_dawn_fascist_bar)" > "scripted_bar_progress(ut_new_dawn_autocrat_bar)"
						}
					}
				}
			}
			triggered_desc = {
				desc = ut_new_dawn_communist_status
				trigger = {
					scope:journal_entry = { 
						"scripted_bar_progress(ut_new_dawn_communist_bar)" > "scripted_bar_progress(ut_new_dawn_fascist_bar)"
						"scripted_bar_progress(ut_new_dawn_communist_bar)" > "scripted_bar_progress(ut_new_dawn_democrat_bar)"
						"scripted_bar_progress(ut_new_dawn_communist_bar)" > "scripted_bar_progress(ut_new_dawn_autocrat_bar)"
					}
				}
			}
			triggered_desc = {
				desc = ut_new_dawn_autocrat_status
				trigger = {
					scope:journal_entry = { 
						"scripted_bar_progress(ut_new_dawn_autocrat_bar)" > "scripted_bar_progress(ut_new_dawn_fascist_bar)"
						"scripted_bar_progress(ut_new_dawn_autocrat_bar)" > "scripted_bar_progress(ut_new_dawn_democrat_bar)"
						"scripted_bar_progress(ut_new_dawn_autocrat_bar)" > "scripted_bar_progress(ut_new_dawn_autocrat_bar)"
					}
				}
			}
		}
	}

	on_weekly_pulse = {
		events = {
			event_new_dawn.1
		}
		effect = {
			if = {
				limit = {
					NOT = {
						has_variable = ut_new_dawn_bar_freeze #This variable stops iteration, and is granted by reaching 480 with one ideology. It's reset when this JE is completed, or when je_cement_the_rightful_ideology fails.
					}
				}
				#Calculates how much the each core ideology will get next month. Updates weekly, but is not added until the monthly.
				ut_new_dawn_fascist_progress = yes 
				ut_new_dawn_democrat_progress = yes
				ut_new_dawn_communist_progress = yes
				ut_new_dawn_autocrat_progress = yes
			}
		}
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					scope:journal_entry = { 
						OR = {
							"scripted_bar_progress(ut_new_dawn_fascist_bar)" >= new_dawn_core_upper_bound
							"scripted_bar_progress(ut_new_dawn_democrat_bar)" >= new_dawn_core_upper_bound
							"scripted_bar_progress(ut_new_dawn_communist_bar)" >= new_dawn_core_upper_bound
							"scripted_bar_progress(ut_new_dawn_autocrat_bar)" >= new_dawn_core_upper_bound
						}
					}
					NOT = {
						has_variable = ut_new_dawn_bar_freeze
					}
				}
				ut_freeze_new_dawn_progress = yes #Freezes the bars so that they no longer accumulate progress on the monthly tick, and stay as they are. In the case that Cement the Rightful ideology fails, the bars will be set back.
				if = {
					limit = {
						scope:journal_entry = { 
							OR = {
								AND = {
									"scripted_bar_progress(ut_new_dawn_democrat_bar)" > "scripted_bar_progress(ut_new_dawn_communist_bar)"
									"scripted_bar_progress(ut_new_dawn_democrat_bar)" > "scripted_bar_progress(ut_new_dawn_fascist_bar)" 
									"scripted_bar_progress(ut_new_dawn_democrat_bar)" > "scripted_bar_progress(ut_new_dawn_autocrat_bar)"
									root = { has_modifier = je_ut_new_dawn_democrat_focus }
								}
								AND = {
									"scripted_bar_progress(ut_new_dawn_autocrat_bar)" > "scripted_bar_progress(ut_new_dawn_democrat_bar)"
									"scripted_bar_progress(ut_new_dawn_autocrat_bar)" > "scripted_bar_progress(ut_new_dawn_communist_bar)"
									"scripted_bar_progress(ut_new_dawn_autocrat_bar)" > "scripted_bar_progress(ut_new_dawn_fascist_bar)"
									root = { has_modifier = je_ut_new_dawn_autocrat_focus }
								}
								AND = {
									"scripted_bar_progress(ut_new_dawn_communist_bar)" > "scripted_bar_progress(ut_new_dawn_democrat_bar)"
									"scripted_bar_progress(ut_new_dawn_communist_bar)" > "scripted_bar_progress(ut_new_dawn_autocrat_bar)"
									"scripted_bar_progress(ut_new_dawn_communist_bar)" > "scripted_bar_progress(ut_new_dawn_fascist_bar)"
									root = { has_modifier = je_ut_new_dawn_communist_focus }
								}
								AND = {
									"scripted_bar_progress(ut_new_dawn_fascist_bar)" > "scripted_bar_progress(ut_new_dawn_democrat_bar)"
									"scripted_bar_progress(ut_new_dawn_fascist_bar)" > "scripted_bar_progress(ut_new_dawn_autocrat_bar)"
									"scripted_bar_progress(ut_new_dawn_fascist_bar)" > "scripted_bar_progress(ut_new_dawn_communist_bar)"
									root = { has_modifier = je_ut_new_dawn_fascist_focus }
								}
							}
						}
					}
					trigger_event = { id = event_new_dawn.2 popup = yes} #Reinforcement event - fires if the leading ideology is the one in power.
				}
				else = {
					trigger_event = { id = event_new_dawn.3 popup = yes} #Coup event - fires if the leading ideology is not the one in power.
				}
			}
		}
		random_events = {
			400 = 0
			10 = event_new_dawn.11
			# 10 = french_pretenders_pulse.3
			# 50 = french_pretenders_pulse.10
			# 10 = french_pretenders_pulse.11
			# 10 = french_pretenders_pulse.12
			# 10 = french_pretenders_pulse.13
			# 10 = french_pretenders_pulse.14
			# 10 = french_pretenders_pulse.15
			# 10 = french_pretenders_pulse.16
			# 10 = french_pretenders_pulse.17
			# 10 = french_pretenders_pulse.18
		}
	}

	weight = 100

	should_be_pinned_by_default = yes
}

je_ut_new_dawn_democratic = {
	icon = "gfx/interface/icons/new_dawn_icons/ut_nd_democrat.dds"

	group = je_group_utopia
	
	modifiers_while_active = {
		new_dawn_phase_2_mod
		je_ut_new_dawn_democratic_mod
	}

	immediate = {
		ut_set_new_dawn_variables = yes
		
		remove_modifier = je_ut_new_dawn_democrat_focus
		remove_modifier = je_ut_new_dawn_autocrat_focus
		remove_modifier = je_ut_new_dawn_communist_focus
		remove_modifier = je_ut_new_dawn_fascist_focus
		
		if = {
			limit = {
				NOT = { has_modifier = je_ut_new_dawn_democrat_focus }	
			}
			add_modifier = {
				name = je_ut_new_dawn_democrat_focus
			}
		}
		if = {
			limit = {
				NOT = { has_modifier = ut_new_dawn_core_democratic_mod }
			}
			add_modifier = {
				name = ut_new_dawn_core_democratic_mod
			}
		}
		if = {
			limit = {
				is_power_bloc_leader = yes
				power_bloc ?= {
					has_principle_group = principle_group:principle_group_colonial_offices
				}
			}
			power_bloc ?= {
				remove_principle = principle_colonial_offices_1
				remove_principle = principle_colonial_offices_2
				remove_principle = principle_colonial_offices_3

				if = {
					limit = {
						NOT = { has_principle_group = principle_group:principle_group_external_trade }
					}
					add_principle = principle_external_trade_1
				}
			}		
		}
		if = {
			limit = {
				has_law = law_type:law_monarchy
			}
			activate_law = law_type:ut_law_monarchy_democratic
		}
	}
	
	scripted_button = je_ut_new_dawn_democratic_spirit
	scripted_button = je_ut_new_dawn_democratic_cultural_values
	scripted_button = je_ut_new_dawn_democratic_power_bloc
	scripted_button = je_ut_new_dawn_democratic_fair_elections
	scripted_button = je_ut_new_dawn_democratic_final

	
	scripted_progress_bar = je_ut_new_dawn_democratic_points_bar

	complete = {
		custom_tooltip = {
			text = je_ut_new_dawn_democratic_complete_condition_tt
			has_variable = je_ut_new_dawn_democratic_spirit_done
			has_variable = je_ut_new_dawn_democratic_cultural_values_done
			has_variable = je_ut_new_dawn_democratic_power_bloc_done
			has_variable = je_ut_new_dawn_democratic_fair_elections_done
			has_variable = je_ut_new_dawn_democratic_final_done
		}
		
		custom_tooltip = {
			text = new_dawn_ideology_upper_bound_tt
			je:je_ut_new_dawn_democratic = { 
				"scripted_bar_progress(je_ut_new_dawn_democratic_points_bar)" >= new_dawn_ideology_upper_bound
			}
		}
	}

	on_complete = {
		custom_tooltip = {
			text = je_ut_new_dawn_effect_tt
			ut_clear_divided_new_dawn_variables = yes #Removes all variables used for math in this JE, to save memory and performance.
		}
		set_variable = je_ut_new_dawn_done
	}

	status_desc = {
	}


	on_weekly_pulse = {
		events = {
			#event_new_dawn.1
		}
		effect = {
			if = {
				limit = {
					is_player = yes
				}
				ut_new_dawn_democrat_progress = yes
			}
		}
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					is_player = no
				}
				ut_new_dawn_democrat_progress = yes
			}
			if = {
				limit = {
					NOT = { has_modifier = je_ut_new_dawn_democrat_focus }
				}
				add_modifier = {
					name = je_ut_new_dawn_democrat_focus
				}
			}
			#debug todo remove, only for backwards compat
			if = {
				limit = {
					NOT = { has_modifier = ut_new_dawn_core_democratic_mod }
				}
				add_modifier = {
					name = ut_new_dawn_core_democratic_mod
				}
			}
		}
		random_events = {
			400 = 0
			# 10 = french_pretenders_pulse.2
		}
	}

	fail = {
		custom_tooltip = {
			text = je_ut_new_dawn_critical_lower_bound_fail_tt
			je:je_ut_new_dawn_democratic = { 
				"scripted_bar_progress(je_ut_new_dawn_democratic_points_bar)" <= new_dawn_ideology_critical_lower_bound
			}
		}
	}

	# effect which is executed when 'fail' trigger becomes true
	on_fail = {
		remove_modifier = je_ut_new_dawn_democrat_focus
		remove_modifier = ut_new_dawn_core_democratic_mod
		remove_variable = ut_new_dawn_bar_freeze
	
		je:je_ut_new_dawn = {
			add_progress = {
				value = -120
				name = ut_new_dawn_democrat_bar
			}
		}
	}

	weight = 100

	should_be_pinned_by_default = yes
}

je_ut_new_dawn_autocratic = {
	icon = "gfx/interface/icons/new_dawn_icons/ut_nd_autocrat.dds"

	group = je_group_utopia

	modifiers_while_active = {
		new_dawn_phase_2_mod
		je_ut_new_dawn_autocratic_mod
	}

	scripted_button = je_ut_new_dawn_emergency_powers
	scripted_button = je_ut_new_dawn_strengthen_power
	scripted_button = je_ut_new_dawn_border_dispute
	scripted_button = je_ut_new_dawn_suppress_dissidents

	immediate = {
		ut_set_new_dawn_variables = yes

		remove_modifier = je_ut_new_dawn_democrat_focus
		remove_modifier = je_ut_new_dawn_autocrat_focus
		remove_modifier = je_ut_new_dawn_communist_focus
		remove_modifier = je_ut_new_dawn_fascist_focus
		
		if = {
			limit = {
				NOT = { has_modifier = je_ut_new_dawn_autocrat_focus }	
			}
			add_modifier = {
				name = je_ut_new_dawn_autocrat_focus
			}
		}
		if = {
			limit = {
				NOT = { has_modifier = ut_new_dawn_core_autocratic_mod }
			}
			add_modifier = {
				name = ut_new_dawn_core_autocratic_mod
			}
		}
	}

	
	scripted_progress_bar = je_ut_new_dawn_autocratic_points_bar

	complete = {
		custom_tooltip = {
			text = je_ut_new_dawn_autocratic_complete_condition_tt
			always = no
		}
	}

	# on_complete = {
	# 	custom_tooltip = {
	# 		text = je_ut_new_dawn_effect_tt
	# 		ut_clear_divided_new_dawn_variables = yes #Removes all variables used for math in this JE, to save memory and performance.
	# 	}
	# 	set_variable = je_ut_new_dawn_done
	# }

	status_desc = {
	}


	on_weekly_pulse = {
		events = {
			#event_new_dawn.1
		}
		effect = {
			ut_new_dawn_autocrat_progress = yes
		}
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					NOT = { has_modifier = je_ut_new_dawn_autocrat_focus }
				}
				add_modifier = {
					name = je_ut_new_dawn_autocrat_focus
				}
			}
			#debug todo remove, only for backwards compat
			if = {
				limit = {
					NOT = { has_modifier = ut_new_dawn_core_autocratic_mod }
				}
				add_modifier = {
					name = ut_new_dawn_core_autocratic_mod
				}
			}
		}
		random_events = {
			400 = 0
			# 10 = french_pretenders_pulse.2
		}
	}

	fail = {
		custom_tooltip = {
			text = je_ut_new_dawn_critical_lower_bound_fail_tt
			je:je_ut_new_dawn_autocratic = { 
				"scripted_bar_progress(je_ut_new_dawn_autocratic_points_bar)" <= new_dawn_ideology_critical_lower_bound
			}
		}
	}

	# effect which is executed when 'fail' trigger becomes true
	on_fail = {
		remove_modifier = je_ut_new_dawn_autocrat_focus
		remove_modifier = ut_new_dawn_core_autocratic_mod
		remove_variable = ut_new_dawn_bar_freeze
		je:je_ut_new_dawn = {
			add_progress = {
				value = -120
				name = ut_new_dawn_autocrat_bar
			}
		}
	}

	weight = 100

	should_be_pinned_by_default = yes
}

je_ut_new_dawn_fascist = {
	icon = "gfx/interface/icons/new_dawn_icons/ut_nd_fascist.dds"

	group = je_group_utopia

	modifiers_while_active = {
		new_dawn_phase_2_mod
		je_ut_new_dawn_fascist_mod
	}

	immediate = {
		ut_set_new_dawn_variables = yes
		remove_modifier = je_ut_new_dawn_democrat_focus
		remove_modifier = je_ut_new_dawn_autocrat_focus
		remove_modifier = je_ut_new_dawn_communist_focus
		remove_modifier = je_ut_new_dawn_fascist_focus

		if = {
			limit = {
				NOT = { has_modifier = je_ut_new_dawn_fascist_focus }	
			}
			add_modifier = {
				name = je_ut_new_dawn_fascist_focus
			}
		}
		if = {
			limit = {
				NOT = { has_modifier = ut_new_dawn_core_fascist_mod }
			}
			add_modifier = {
				name = ut_new_dawn_core_fascist_mod
			}
		}
	}
	
	
	#Fascist Theory
	
	# Anti-liberalism & anti-Marxism
	scripted_button = je_ut_new_dawn_outlaw_communists
	# Militarism & cult of violence
	scripted_button = je_ut_new_dawn_form_paramilitary_groups
	# Leader principle
	# State-controlled economy (corporatism)
	scripted_button = je_ut_new_dawn_conformity
	# Collectivism
	scripted_button = je_ut_new_dawn_unite_heritage

	# Extreme nationalism
	# Propaganda & myths
	scripted_button = je_ut_new_dawn_volksgemeinschaft

	
	scripted_button = je_ut_new_dawn_expansionism


	
	
	
	
	scripted_progress_bar = je_ut_new_dawn_fascist_points_bar

	complete = {
		custom_tooltip = {
			text = je_ut_new_dawn_fascist_complete_condition_tt
			has_variable = je_ut_new_dawn_outlaw_communists
			has_variable = je_ut_new_dawn_form_paramilitary_groups
			has_variable = je_ut_new_dawn_conformity
			has_variable = je_ut_new_dawn_volksgemeinschaft
			has_variable = je_ut_new_dawn_unite_heritage
			has_variable = je_ut_new_dawn_expansionism
		}
		
		custom_tooltip = {
			text = new_dawn_ideology_upper_bound_tt
			je:je_ut_new_dawn_fascist = { 
				"scripted_bar_progress(je_ut_new_dawn_fascist_points_bar)" >= new_dawn_ideology_upper_bound
			}
		}

		
		average_sol_for_culture = {
			target = root.ruler.culture
			value >= 100
		}
		custom_tooltip = {
			text = je_ut_new_dawn_fascist_final_tt
			
			NOT = {
				any_country = {
					NOT = { root = this }
				}
			}
		}
	}

	on_complete = {
		custom_tooltip = {
			text = je_ut_new_dawn_effect_tt
			ut_clear_divided_new_dawn_variables = yes #Removes all variables used for math in this JE, to save memory and performance.
		}
		set_variable = je_ut_new_dawn_done
	}

	status_desc = {
	}


	on_weekly_pulse = {
		events = {
			#event_new_dawn.1
		}
		effect = {
			if = {
				limit = {
					is_player = yes
				}
				ut_new_dawn_fascist_progress = yes
			}
		}
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					is_player = no
				}
				ut_new_dawn_fascist_progress = yes
			}
			if = {
				limit = {
					NOT = { has_modifier = je_ut_new_dawn_fascist_focus }
				}
				add_modifier = {
					name = je_ut_new_dawn_autocrat_focus
				}
			}
			#debug todo remove, only for backwards compat
			if = {
				limit = {
					NOT = { has_modifier = ut_new_dawn_core_fascist_mod }
				}
				add_modifier = {
					name = ut_new_dawn_core_fascist_mod
				}
			}
		}
		random_events = {
			400 = 0
			# 10 = french_pretenders_pulse.2
		}
	}

	fail = {
		custom_tooltip = {
			text = je_ut_new_dawn_critical_lower_bound_fail_tt
			je:je_ut_new_dawn_fascist  = { 
				"scripted_bar_progress(je_ut_new_dawn_fascist_points_bar)" <= new_dawn_ideology_critical_lower_bound
			}
		}
	}

	# effect which is executed when 'fail' trigger becomes true
	on_fail = {
		remove_modifier = je_ut_new_dawn_fascist_focus
		remove_modifier = ut_new_dawn_core_fascist_mod
		remove_variable = ut_new_dawn_bar_freeze
		je:je_ut_new_dawn = {
			add_progress = {
				value = -120
				name = ut_new_dawn_fascist_bar
			}
		}
	}

	weight = 100

	should_be_pinned_by_default = yes
}

je_ut_new_dawn_communist = {
	icon = "gfx/interface/icons/new_dawn_icons/ut_nd_communist.dds"

	group = je_group_utopia

	modifiers_while_active = {
		new_dawn_phase_2_mod
		je_ut_new_dawn_communist_mod
	}

	immediate = {
		ut_set_new_dawn_variables = yes
		remove_modifier = je_ut_new_dawn_democrat_focus
		remove_modifier = je_ut_new_dawn_autocrat_focus
		remove_modifier = je_ut_new_dawn_communist_focus
		remove_modifier = je_ut_new_dawn_fascist_focus
		
		if = {
			limit = {
				NOT = { has_modifier = je_ut_new_dawn_communist_focus }	
			}
			add_modifier = {
				name = je_ut_new_dawn_communist_focus
			}
		}
		if = {
			limit = {
				NOT = { has_modifier = ut_new_dawn_core_communist_mod }
			}
			add_modifier = {
				name = ut_new_dawn_core_communist_mod
			}
		}
	}
	#Path A Historical Lenin-/Stalinism
	#Path B Utopian Democratic Communists
	#Joining for Marxist Communism
	scripted_button = je_ut_communist_one_communist_party
	scripted_button = je_ut_communist_a_communist_party
	scripted_button = je_ut_communist_one_block
	scripted_button = je_ut_communist_one_people
	scripted_button = je_ut_communist_final
	
	scripted_progress_bar = je_ut_new_dawn_communist_points_bar

	complete = {
		custom_tooltip = {
			text = je_ut_new_dawn_communist_complete_condition_tt
			always = no
		}
		
		custom_tooltip = {
			text = new_dawn_ideology_upper_bound_tt
			je:je_ut_new_dawn_communist = { 
				"scripted_bar_progress(je_ut_new_dawn_communist_points_bar)" >= new_dawn_ideology_upper_bound
			}
		}
	}

	on_complete = {
		custom_tooltip = {
			text = je_ut_new_dawn_effect_tt
			ut_clear_divided_new_dawn_variables = yes #Removes all variables used for math in this JE, to save memory and performance.
		}
		set_variable = je_ut_new_dawn_done
	}

	status_desc = {
	}


	on_weekly_pulse = {
		events = {
			#event_new_dawn.1
		}
		effect = {
			ut_new_dawn_communist_progress = yes
		}
	}

	on_monthly_pulse = {
		effect = {
			if = {
				limit = {
					NOT = { has_modifier = je_ut_new_dawn_communist_focus }
				}
				add_modifier = {
					name = je_ut_new_dawn_communist_focus
				}
			}
			#debug todo remove, only for backwards compat
			if = {
				limit = {
					NOT = { has_modifier = ut_new_dawn_core_communist_mod }
				}
				add_modifier = {
					name = ut_new_dawn_core_communist_mod
				}
			}
		}
		random_events = {
			400 = 0
			# 10 = french_pretenders_pulse.2
		}
	}

	fail = {
		custom_tooltip = {
			text = je_ut_new_dawn_critical_lower_bound_fail_tt
			je:je_ut_new_dawn_communist = { 
				"scripted_bar_progress(je_ut_new_dawn_communist_points_bar)" <= new_dawn_ideology_critical_lower_bound
			}
		}
	}

	# effect which is executed when 'fail' trigger becomes true
	on_fail = {
		remove_modifier = je_ut_new_dawn_communist_focus
		remove_modifier = ut_new_dawn_core_communist_mod
		remove_variable = ut_new_dawn_bar_freeze
		je:je_ut_new_dawn = {
			add_progress = {
				value = -120
				name = ut_new_dawn_communist_bar
			}
		}
	}

	weight = 100

	should_be_pinned_by_default = yes
}