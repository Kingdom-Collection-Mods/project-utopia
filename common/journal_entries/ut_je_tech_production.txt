ut_heavy_industrial_machinery_je = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"
	group = je_group_technology

	weight = 100
	should_be_pinned_by_default = yes

	is_shown_when_inactive = {
		always = yes
		NOT = { has_variable = heavy_industrial_machinery_je_done }
	}
	
	transferable = yes

	possible = {
		has_technology_researched = heavy_machinery_era_analog
		any_scope_state = {
			has_building = building_motor_industry
			is_incorporated = yes
		}
	}

	complete = {
		any_scope_building = {
			is_building_type = building_heavy_machinery_factory
			level >= 5
			occupancy > 0.75
			cash_reserves_ratio > 0.25
			weekly_profit > 0
		}
	}

	on_complete = {
		trigger_event = {
			id = utopia_journal_prod.1
		}
		set_variable = {
			name = heavy_industrial_machinery_je_done
		}
	}

	on_timeout = {
		trigger_event = {
			id = utopia_journal_prod.2
		}
	}

	timeout = 1825  # 5 years
}

ut_cnc_machines_je = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"
	group = je_group_technology

	is_shown_when_inactive = {
		has_variable = heavy_industrial_machinery_je_done
		NOT = { has_variable = cnc_machines_je_done }
	}

	possible = {
		has_technology_researched = heavy_machinery_era_digital
		any_scope_building = {
			is_building_type = building_heavy_machinery_factory
		}
		has_variable = heavy_industrial_machinery_je_done
	}

	complete = {
		any_scope_building = {
			is_building_type = building_heavy_machinery_factory
			level >= 8
			occupancy > 0.90
			cash_reserves_ratio > 0.30
			has_active_production_method = pm_heavy_machinery_digital_process
		}
	}

	on_complete = {
		trigger_event = {
			id = utopia_journal_prod.3
		}
		set_variable = {
			name = cnc_machines_je_done
		}
	}

	
	timeout = 3650
}

ut_heavy_tractors_je = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"
	group = je_group_technology

	is_shown_when_inactive = {
		has_technology_researched = mechanized_farming
		NOT = { has_variable = heavy_tractors_je_done }
	}

	possible = {
		has_technology_researched = heavy_machinery_farming
	}

	complete = {
		any_scope_building = {
			filter = {
				OR = {
					is_building_type = building_rye_farm
					is_building_type = building_wheat_farm
					is_building_type = building_maize_farm
					is_building_type = building_millet_farm
				}
			}
			percent >= 0.5
			OR = {
				has_active_production_method = pm_farms_heavy_machinery_support
				has_active_production_method = pm_farms_heavy_machinery_support_rice
			}
			cash_reserves_ratio > 0.25
			weekly_profit > 0
			occupancy > 0.75
		}
	}

	on_complete = {
		trigger_event = {
			id = utopia_journal_prod.5
		} 
		set_variable = {
			name = heavy_tractors_je_done
		}
	}
	
	timeout = 3650
}

ut_agrarian_planes_je = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"
	group = je_group_technology

	is_shown_when_inactive = {
		has_variable = heavy_tractors_je_done
	}

	possible = {
		has_technology_researched = airplane_farming
		has_variable = heavy_tractors_je_done
	}

	complete = {
		any_scope_building = {
			filter = {
				OR = {
					is_building_type = building_rye_farm
					is_building_type = building_wheat_farm
					is_building_type = building_maize_farm
					is_building_type = building_millet_farm
				}
			}
			percent >= 0.5
			OR = {
				has_active_production_method = pm_farms_plane_support
				has_active_production_method = pm_farms_plane_support_rice
			}
			cash_reserves_ratio > 0.25
			weekly_profit > 0
			occupancy > 0.75
		}
	}

	on_complete = {
		trigger_event = {
			id = utopia_journal_prod.6
		}
		set_variable = {
			name = agrarian_planes_je_done
		}
	}
	
	timeout = 3650
}

ut_plastic_je = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"
	group = je_group_technology

	is_shown_when_inactive = {
		has_technology_researched = art_silk
	}

	possible = {
		has_technology_researched = plastics_nylon
	}

	complete = {
		any_scope_building = {
			is_building_type = building_plastic_factory
			level >= 5
			occupancy > 0.75
			has_active_production_method = pm_plastic_one_process
			weekly_profit > 500
		}
	}

	on_complete = {
		trigger_event = {
			id = utopia_journal_prod.7
		}
	}
	
	timeout = 3650
}

ut_electronics_je = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"
	group = je_group_technology

	is_shown_when_inactive = {
		has_technology_researched = electric_railway
	}

	possible = {
		has_technology_researched = electronics
	}

	complete = {
		any_scope_building = {
			is_building_type = building_electrics_industry
			level >= 5
			cash_reserves_ratio > 0.25
			weekly_profit > 0
			occupancy > 0.75
		}
	}

	on_complete = {
		trigger_event = {
			id = utopia_journal_prod.8
		}
		set_variable = {
			name = electronics_je_done
		}
	}
	
	timeout = 3650
}

ut_computers_je = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"
	group = je_group_technology

	is_shown_when_inactive = {
		has_variable =  electronics_je_done
	}

	possible = {
		has_technology_researched = computers
		has_variable = electronics_je_done
	}

	complete = {
		any_scope_building = {
			is_building_type = building_electrics_industry
			level >= 5
			cash_reserves_ratio > 0.25
			weekly_profit > 0
			occupancy > 0.75
		}
	}

	on_complete = {
		trigger_event = {
			id = utopia_journal_prod.9
		}
		set_variable = {
			name = computers_je_done
		}
	}
	
	timeout = 3650
}

ut_software_je = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"
	group = je_group_technology

	is_shown_when_inactive = {
		has_variable =  computers_je_done
	}

	possible = {
		has_technology_researched = software
		has_variable = computers_je_done
	}

	complete = {
		any_scope_building = {
			is_building_type = building_electrics_industry
			level >= 5
			cash_reserves_ratio > 0.25
			weekly_profit > 0
			occupancy > 0.75
		}
	}

	on_complete = {
		trigger_event = {
			id = utopia_journal_prod.10
		}
	}
	
	timeout = 3650
}

ut_consumer_goods_simple_je = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"
	group = je_group_technology

	weight = 100
	should_be_pinned_by_default = yes

	transferable = yes

	is_shown_when_inactive = {
		always = yes
	}

	possible = {
		has_technology_researched = consumer_goods_main_analog
	}

	complete = {
		any_scope_building = {
			is_building_type = building_electrics_industry
			level >= 5
			cash_reserves_ratio > 0.25
			weekly_profit > 0
			occupancy > 0.75
		}
	}

	on_complete = {
		trigger_event = {
			id = utopia_journal_prod.11
		}
		set_variable = {
			name = consumer_goods_simple_je_done
		}
	}
	
	on_timeout = {
		trigger_event = {
			id = utopia_journal_prod.4
		}
	}
	
	timeout = 1825  # 5 years
}

ut_consumer_goods_complex_je = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"
	group = je_group_technology

	is_shown_when_inactive = {
		has_variable = consumer_goods_simple_je_done
	}

	possible = {
		has_technology_researched = consumer_goods_main_house_hold_electrical
	}

	complete = {
		any_scope_building = {
			is_building_type = building_electrics_industry
			level >= 5
			cash_reserves_ratio > 0.25
			weekly_profit > 0
			occupancy > 0.75
		}
	}

	on_complete = {
		trigger_event = {
			id = utopia_journal_prod.12
		}
	}
	
	timeout = 3650
}


ut_je_research_institute_founding = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_technology

	on_monthly_pulse = {
		effect = {
			change_variable = {
				name = ut_research_institute_found_var
				add = 1
			}
		}
	}

	complete = {
		scope:journal_entry = { is_goal_complete = yes }
		any_scope_state = {
			is_split_state = no
			is_incorporated = yes
			OR = {
				any_scope_building = {
					is_building_type = building_heavy_machinery_factory
					level >= 10
				}
				any_scope_building = {
					is_building_type = building_electronic_factory
					level >= 5
				}
				any_scope_building = {
					is_building_type = building_computer_factory
					level >= 1
				}
			}
		}
	}

	on_complete = {
		remove_modifier = ut_research_institute_found_mod
		trigger_event = { id = utopia_journal_prod.40 } # site found
		set_variable = ut_research_institute_found
	}

	invalid = {
		NOT = {
			any_scope_state = {
				is_split_state = no
				is_incorporated = yes
				any_scope_building = {
					is_building_type = building_computer_factory
					level >= 1
				}
			}
		}
	}

	on_invalid = {
		remove_modifier = ut_research_institute_found_mod
		remove_variable = ut_research_institute_found_var
	}

	current_value = {
		value = root.var:ut_research_institute_found_var
	}

	goal_add_value = {
		value = 48
	}

	progressbar = yes

	weight = 10

	should_be_pinned_by_default = yes
}

ut_je_research_institute_construction = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	group = je_group_technology

	complete = {
		scope:target = {
			any_scope_building = {
				is_building_type = building_ut_research_institute
				is_under_construction = no
				occupancy > 0.75
			}
		}
	}

	fail = {
		NOT = {
			any_scope_state = {
				has_modifier = ut_research_institute_site_mod
			}
		}
	}

	on_fail = {
		remove_variable = ut_research_institute_found_var
	}

	on_complete = {
		remove_variable = ut_research_institute_found_var
		scope:target = {
			remove_modifier = ut_research_institute_site_mod
		}
	}

	should_be_pinned_by_default = yes
}

ut_je_ut_research_high_tech_computers_research = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	group = je_group_technology

	on_monthly_pulse = {
		effect = {
			every_scope_building = {
				limit = {
					is_building_type = building_heavy_machinery_factory
				}
				ROOT = {
					change_variable = { name = ut_nd_autocrat_progress_from_characters add = prev.popularity }
					change_variable = {
						name = ut_research_high_tech_computers_var
						add = prev.occupancy
					}
				}
			}
		}
	}

	complete = {
		scope:journal_entry = { is_goal_complete = yes }
		any_scope_state = {
			is_split_state = no
			is_incorporated = yes
			any_scope_building = {
				is_building_type = building_computer_factory
				level >= 10
			}
		}
	}

	on_complete = {
		remove_modifier = ut_research_high_tech_computers_research_mod
		trigger_event = { id = utopia_journal_prod.42 } # site found
	}

	invalid = {
		NOT = {
			any_scope_state = {
				is_split_state = no
				is_incorporated = yes
				any_scope_building = {
					is_building_type = building_computer_factory
					level >= 10
				}
			}
		}
	}

	on_invalid = {
		remove_modifier = ut_research_high_tech_computers_research_mod
		remove_variable = ut_research_high_tech_computers_var
	}

	current_value = {
		value = root.var:ut_research_high_tech_computers_var
	}

	goal_add_value = {
		value = 48
	}

	progressbar = yes

	weight = 10

	should_be_pinned_by_default = yes
}
