#Base
ut_new_dawn_fascist_focus = {
	name = "ut_new_dawn_fascist_focus"
	desc = "ut_new_dawn_fascist_focus_desc"

	visible = { always = yes }

	possible = {
		NOT = { has_modifier = ut_new_dawn_focus_recently_changed }
		custom_tooltip = {
			text = ut_new_dawn_focus_freeze_tt
			NOT = { has_variable = ut_new_dawn_bar_freeze }
		}
		# custom_tooltip = {
		# 	text = ut_new_dawn_focus_already_selected_tt
		# 	NOT = { has_modifier = je_ut_new_dawn_fascist_focus }
		# }
	}

	effect = {	
		custom_tooltip = ut_new_dawn_focus_tt 
		add_modifier = {
			name = je_ut_new_dawn_fascist_focus
		}
		remove_modifier = je_ut_new_dawn_autocrat_focus
		remove_modifier = je_ut_new_dawn_democrat_focus
		remove_modifier = je_ut_new_dawn_communist_focus
		add_modifier = {
			name = ut_new_dawn_focus_recently_changed
			days = normal_modifier_time
		}
	}
	#1000 always
	#10 very likely
	#5 likely
	#1 if no other reasons
	ai_chance = {
		value = 0
		if = {
			limit = {
				OR = {
					c:GER ?= this
					c:ITA ?= this
				}
			}
			add = 10
		}
		if = {
			limit = {
				has_law = law_type:law_ethnostate
			}
			add = 5
		}
		if = {
			#Historically Germany, Italy, and Japan below in "ranking"?
			limit = {
				global_country_ranking < 5
			}
			add = 5
		}
		if = {
			#Red scare if not socialist them self?
			limit = {
				NOT = { has_law = law_type:law_multicultural }
				NOT = { has_law = law_type:law_cooperative_ownership }
				NOT = { has_law = law_type:law_command_economy }
				any_neighbouring_state = {
					owner = {
						OR = {
							has_variable = ut_new_dawn_communist_focus
							has_variable = ut_new_dawn_core_communist_var
						}
					}
				}
			}
			add = 1
		}
	}
}

ut_new_dawn_autocrat_focus = {
	name = "ut_new_dawn_autocrat_focus"
	desc = "ut_new_dawn_autocrat_focus_desc"

	visible = { always = yes }

	possible = {
		NOT = { has_modifier = ut_new_dawn_focus_recently_changed }
		custom_tooltip = {
			text = ut_new_dawn_focus_freeze_tt
			NOT = { has_variable = ut_new_dawn_bar_freeze }
		}
		# custom_tooltip = {
		# 	text = ut_new_dawn_focus_already_selected_tt
		# 	NOT = { has_modifier = je_ut_new_dawn_autocrat_focus }
		# }
	}

	effect = {
		custom_tooltip = ut_new_dawn_focus_tt
		add_modifier = {
			name = je_ut_new_dawn_autocrat_focus
		}
		remove_modifier = je_ut_new_dawn_fascist_focus
		remove_modifier = je_ut_new_dawn_democrat_focus
		remove_modifier = je_ut_new_dawn_communist_focus
		add_modifier = {
			name = ut_new_dawn_focus_recently_changed
			days = normal_modifier_time
		}
	}
	ai_chance = {
		value = 0
		if = {
			limit = {
				OR = {
					c:AUS ?= this
				}
			}
			add = 10
		}
		
		if = {
			#let's stay in power, if nothing else to bother
			limit = {
				OR = {
					has_law = law_type:law_monarchy
					has_law = law_type:law_corporate_state
				}
				OR = {
					has_law = law_type:law_autocracy
					has_law = law_type:law_oligarchy
				}
			}
			add = 5
		}
		if = {
			#Same chance as fascist
			limit = {
				global_country_ranking < 5
			}
			add = 5
		}	
	}

}

ut_new_dawn_democrat_focus = {
	name = "ut_new_dawn_democrat_focus"
	desc = "ut_new_dawn_democrat_focus_desc"

	visible = { always = yes }

	possible = {
		NOT = { has_modifier = ut_new_dawn_focus_recently_changed }
		custom_tooltip = {
			text = ut_new_dawn_focus_freeze_tt
			NOT = { has_variable = ut_new_dawn_bar_freeze }
		}
		# custom_tooltip = {
		# 	text = ut_new_dawn_focus_already_selected_tt
		# 	NOT = { has_modifier = je_ut_new_dawn_democrat_focus }
		# }
		NOT = { has_modifier = je_ut_new_dawn_democrat_focus }
	}

	effect = {
		custom_tooltip = ut_new_dawn_focus_tt
		add_modifier = {
			name = je_ut_new_dawn_democrat_focus
		}
		remove_modifier = je_ut_new_dawn_fascist_focus
		remove_modifier = je_ut_new_dawn_autocrat_focus
		remove_modifier = je_ut_new_dawn_communist_focus
		add_modifier = {
			name = ut_new_dawn_focus_recently_changed
			days = normal_modifier_time
		}
	}
	ai_chance = {
		value = 0
		if = {
			limit = {
				c:USA ?= this
				NOT = { exists = c:CSA }
			}
			add = 10
		}
		if = {
			limit = {
				c:GBR ?= this
				exists = c:GER
			}
			add = 10
		}
		if = {
			#Historically USA and Great Britain high "ranking"?
			limit = {
				global_country_ranking > 3
			}
			add = 5
		}
	}
}

ut_new_dawn_communist_focus = {
	name = "ut_new_dawn_communist_focus"
	desc = "ut_new_dawn_communist_focus_desc"

	visible = { always = yes }

	possible = {
		NOT = { has_modifier = ut_new_dawn_focus_recently_changed }
		NOT = { 
			custom_tooltip = {
				text = ut_new_dawn_focus_freeze_tt
				has_variable = ut_new_dawn_bar_freeze
			}
		}
		# custom_tooltip = {
		# 	text = ut_new_dawn_focus_already_selected_tt
		# 	NOT = { has_modifier = je_ut_new_dawn_communist_focus }
		# }
	}

	effect = {		
		custom_tooltip = ut_new_dawn_focus_tt
		add_modifier = {
			name = je_ut_new_dawn_communist_focus
		}
		remove_modifier = je_ut_new_dawn_fascist_focus
		remove_modifier = je_ut_new_dawn_autocrat_focus
		remove_modifier = je_ut_new_dawn_democrat_focus
		add_modifier = {
			name = ut_new_dawn_focus_recently_changed
			days = normal_modifier_time
		}
	}
	ai_chance = {
		value = 0
		if = {
			limit = {
				c:RUS ?= this
			}
			add = 1
		}
	}
}

####Democratic Buttons####
je_ut_new_dawn_democratic_spirit = {
	name = "je_ut_new_dawn_democratic_spirit"
	desc = "je_ut_new_dawn_democratic_spirit_desc"

	visible = { 
		NOT = {
			has_variable = je_ut_new_dawn_democratic_spirit_done
		}
	}

	possible = {
		custom_tooltip = {
			text = new_dawn_ideology_action_done_tt
			NOT = { has_variable = je_ut_new_dawn_democratic_spirit_done }
		}
		custom_tooltip = {
			text = new_dawn_ideology_required_points_tt
			je:je_ut_new_dawn_democratic = { 
				"scripted_bar_progress(je_ut_new_dawn_democratic_points_bar)" >= new_dawn_ideology_required_points
			}
		}
		OR = {
			has_law = law_type:law_parliamentary_republic
			has_law = law_type:law_presidential_republic
		}
		NOT = {
			any_interest_group = {
				is_in_government = yes
				leader = {
					OR = {
						has_ideology = ideology:ideology_fascist
						has_ideology = ideology:ideology_integralist
						has_ideology = ideology:ideology_ethno_nationalist
						has_ideology = ideology:ideology_communist
						has_ideology = ideology:ideology_vanguardist
						has_ideology = ideology:ideology_anarchist
					}
				}
			}
		}
	}

	effect = {		
		ig:ig_intelligentsia = {
			remove_ideology = ideology_liberal
			remove_ideology = ideology_liberal_modern
			add_ideology = ideology_liberal_democratic
		}
		ig:ig_petty_bourgeoisie = {
			remove_ideology = ideology_reactionary
			add_ideology = ideology_reactionary_democratic
		}
		set_variable = je_ut_new_dawn_democratic_spirit_done


		custom_tooltip = {
			text = new_dawn_ideology_required_points_spend_tt
			je:je_ut_new_dawn_democratic = {
				add_progress = { value = -50 name = je_ut_new_dawn_democratic_points_bar }
			}
		}
	}
}

je_ut_new_dawn_democratic_cultural_values = {
	name = "je_ut_new_dawn_democratic_cultural_values"
	desc = "je_ut_new_dawn_democratic_cultural_values_desc"

	visible = { 
		NOT = { has_variable = je_ut_new_dawn_democratic_cultural_values_done }
	}

	possible = {
		custom_tooltip = {
			text = new_dawn_ideology_required_points_tt
			je:je_ut_new_dawn_democratic = { 
				"scripted_bar_progress(je_ut_new_dawn_democratic_points_bar)" >= new_dawn_ideology_required_points
			}
		}
        OR = {
            has_law = law_type:law_protected_speech
            has_law = law_type:law_right_of_assembly
        }
		ig:ig_devout = {
			OR = {
				is_marginal = yes
				custom_tooltip = {
					text = concept_ut_nd_democrat_interest_group_tt
					ut_ideology_new_dawn_democrat_trigger = yes
				}
			}
		}
		ig:ig_industrialists = {
			OR = {
				is_marginal = yes
				custom_tooltip = {
					text = concept_ut_nd_democrat_interest_group_tt
					ut_ideology_new_dawn_democrat_trigger = yes
				}
			}
		}
	}

	effect = {
		ig:ig_devout = {
			remove_ideology = ideology_moralist
			add_ideology = ideology_moralist_democratic
		}
		ig:ig_industrialists = {
			remove_ideology = ideology_plutocratic
			add_ideology = ideology_plutocratic_democratic
		}
		set_variable = je_ut_new_dawn_democratic_cultural_values_done


		custom_tooltip = {
			text = new_dawn_ideology_required_points_spend_tt
			je:je_ut_new_dawn_democratic = {
				add_progress = { value = -50 name = je_ut_new_dawn_democratic_points_bar }
			}
		}
	}
}

je_ut_new_dawn_democratic_power_bloc = {
	name = "je_ut_new_dawn_democratic_power_bloc"
	desc = "je_ut_new_dawn_democratic_power_bloc_desc"

	visible = { 
		NOT = { has_variable = je_ut_new_dawn_democratic_power_bloc_done }
	}

	possible = {
		custom_tooltip = {
			text = new_dawn_ideology_required_points_tt
			je:je_ut_new_dawn_democratic = { 
				"scripted_bar_progress(je_ut_new_dawn_democratic_points_bar)" >= new_dawn_ideology_required_points
			}
		}
		is_subject = no
		is_in_power_bloc = yes
		power_bloc ?= {
			NOT = { has_identity = identity:identity_sovereign_empire }
		}
	}

	effect = {
		set_variable = je_ut_new_dawn_democratic_power_bloc_done
		ig:ig_armed_forces = {
			remove_ideology = ideology_jingoist
			add_ideology = ideology_jingoist_democratic
		}
		add_modifier = {
			name = je_ut_new_dawn_democratic_power_bloc_mod
		}

		
		custom_tooltip = {
			text = new_dawn_ideology_required_points_spend_tt
			je:je_ut_new_dawn_democratic = {
				add_progress = { value = -50 name = je_ut_new_dawn_democratic_points_bar }
			}
		}
	}
}

je_ut_new_dawn_democratic_fair_elections = {
	name = "je_ut_new_dawn_democratic_fair_elections"
	desc = "je_ut_new_dawn_democratic_fair_elections_desc"

	visible = { 
		NOT = { has_variable = je_ut_new_dawn_democratic_fair_elections_done }
	}

	possible = {
		custom_tooltip = {
			text = new_dawn_ideology_required_points_tt
			je:je_ut_new_dawn_democratic = { 
				"scripted_bar_progress(je_ut_new_dawn_democratic_points_bar)" >= new_dawn_ideology_required_points
			}
		}
		has_law = law_type:law_universal_suffrage
	}

	effect = {
		set_variable = je_ut_new_dawn_democratic_fair_elections_done		
		add_modifier = {
			name = je_ut_new_dawn_democratic_fair_elections_mod
		}

		ig:ig_trade_unions = {
			remove_ideology = ideology_socialist
			add_ideology = ideology_socialist_democratic
		}
		
		custom_tooltip = {
			text = new_dawn_ideology_required_points_spend_tt
			je:je_ut_new_dawn_democratic = {
				add_progress = { value = -50 name = je_ut_new_dawn_democratic_points_bar }
			}
		}
	}
}

#Autocratic Buttons

je_ut_new_dawn_emergency_powers = {
	name = "je_ut_new_dawn_emergency_powers"
	desc = "je_ut_new_dawn_emergency_powers_desc"

	possible = {
		custom_tooltip = {
			text = new_dawn_ideology_required_points_tt
			je:je_ut_new_dawn_autocratic = { 
				"scripted_bar_progress(je_ut_new_dawn_autocratic_points_bar)" >= new_dawn_ideology_required_points
			}
		}
		NOT = { has_modifier = je_ut_new_dawn_emergency_powers_mod }
	}

	effect = {
		add_modifier = {
			name = je_ut_new_dawn_emergency_powers_mod
			days = normal_modifier_time
		}
		add_radicals = {
			value = 0.01
		}
		custom_tooltip = {
			text = new_dawn_ideology_required_points_spend_tt
			je:je_ut_new_dawn_autocratic = {
				add_progress = { value = -50 name = je_ut_new_dawn_autocratic_points_bar }
			}
		}
	}
}

je_ut_new_dawn_martial_law = {
	name = "je_ut_new_dawn_martial_law"
	desc = "je_ut_new_dawn_martial_law_desc"

	possible = {
		custom_tooltip = {
			text = new_dawn_ideology_required_points_tt
			je:je_ut_new_dawn_autocratic = { 
				"scripted_bar_progress(je_ut_new_dawn_autocratic_points_bar)" >= new_dawn_ideology_required_points
			}
		}
		NOT = { has_modifier = je_ut_new_dawn_martial_law_mod }
	}

	effect = {
		add_modifier = {
			name = je_ut_new_dawn_martial_law_mod
			days = normal_modifier_time
		}
		add_radicals = {
			value = 0.01
		}
		
		custom_tooltip = {
			text = new_dawn_ideology_required_points_spend_tt
			je:je_ut_new_dawn_autocratic = {
				add_progress = { value = -50 name = je_ut_new_dawn_autocratic_points_bar }
			}
		}
	}
}

je_ut_new_dawn_border_dispute = {
	name = "je_ut_new_dawn_border_dispute"
	desc = "je_ut_new_dawn_border_dispute_desc"

	possible = {
		custom_tooltip = {
			text = new_dawn_ideology_required_points_tt
			je:je_ut_new_dawn_autocratic = { 
				"scripted_bar_progress(je_ut_new_dawn_autocratic_points_bar)" >= new_dawn_ideology_required_points
			}
		}
		NOT = { has_modifier = je_ut_new_dawn_border_dispute_mod }
	}

	effect = {
		add_modifier = {
			name = je_ut_new_dawn_border_dispute_mod
			days = normal_modifier_time
		}
		add_radicals = {
			value = 0.01
		}
		
		custom_tooltip = {
			text = new_dawn_ideology_required_points_spend_tt
			je:je_ut_new_dawn_autocratic = {
				add_progress = { value = -50 name = je_ut_new_dawn_autocratic_points_bar }
			}
		}
	}
}

je_ut_new_dawn_suppress_dissidents = {
	name = "je_ut_new_dawn_suppress_dissidents"
	desc = "je_ut_new_dawn_suppress_dissidents_desc"

	possible = {
		custom_tooltip = {
			text = new_dawn_ideology_required_points_tt
			je:je_ut_new_dawn_autocratic = { 
				"scripted_bar_progress(je_ut_new_dawn_autocratic_points_bar)" >= new_dawn_ideology_required_points
			}
		}
		NOT = { has_modifier = je_ut_new_dawn_suppress_dissidents_mod }
	}

	effect = {
		add_modifier = {
			name = je_ut_new_dawn_suppress_dissidents_mod
			days = normal_modifier_time
		}
		add_radicals = {
			value = 0.01
		}
		
		trigger_event = { id = event_new_dawn.30 }

		custom_tooltip = {
			text = new_dawn_ideology_required_points_spend_tt
			je:je_ut_new_dawn_autocratic = {
				add_progress = { value = -50 name = je_ut_new_dawn_autocratic_points_bar }
			}
		}
	}
}