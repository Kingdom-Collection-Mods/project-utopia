#Base
ut_new_dawn_fascist_focus = {
	name = "ut_new_dawn_fascist_focus"
	desc = "ut_new_dawn_fascist_focus_desc"

	visible = { always = yes }

	possible = {
		NOT = { has_modifier = ut_new_dawn_focus_recently_changed }
		custom_tooltip = {
			text = ut_new_dawn_focus_freeze_tt
			NOT = { has_variable = ut_new_dawn_bar_freeze }
		}
		# custom_tooltip = {
		# 	text = ut_new_dawn_focus_already_selected_tt
		# 	NOT = { has_modifier = je_ut_new_dawn_fascist_focus }
		# }
	}

	effect = {	
		custom_tooltip = ut_new_dawn_focus_tt 		
		hidden_effect = {
			remove_modifier = je_ut_new_dawn_autocrat_focus
			remove_modifier = je_ut_new_dawn_democrat_focus
			remove_modifier = je_ut_new_dawn_communist_focus
			remove_modifier = je_ut_new_dawn_fascist_focus
		}
		add_modifier = {
			name = je_ut_new_dawn_fascist_focus
		}
		add_modifier = {
			name = ut_new_dawn_focus_recently_changed
			days = normal_modifier_time
		}
	}
	#1000 always
	#10 very likely
	#5 likely
	#2 if no other reasons
	ai_chance = {
		value = 0
		if = {
			limit = {
				has_modifier = je_ut_new_dawn_fascist_focus
			}
			add = 20
		}
		if = {
			limit = {
				OR = {
					c:GER ?= this
					c:ITA ?= this
				}
			}
			add = 20
		}
		if = {
			limit = {
				has_law = law_type:law_ethnostate
			}
			add = 4
		}
		if = {
			#Historically Germany, Italy, and Japan below in "ranking"?
			limit = {
				global_country_ranking >= 5
				country_rank >= rank_value:great_power
			}
			add = 4
		}
		if = {
			#Red scare if not socialist them self?
			limit = {
				NOT = { has_law = law_type:law_multicultural }
				NOT = { has_law = law_type:law_cooperative_ownership }
				NOT = { has_law = law_type:law_command_economy }
				any_rival_country = {
					OR = {
						has_modifier = je_ut_new_dawn_communist_focus
						has_variable = ut_new_dawn_core_communist_var
					}
				}
			}
			add = 4
		}
		if = {
			#Red scare if not socialist them self?
			limit = {
				NOT = { has_law = law_type:law_multicultural }
				NOT = { has_law = law_type:law_cooperative_ownership }
				NOT = { has_law = law_type:law_command_economy }
				any_rival_country = {
					OR = {
						has_modifier = je_ut_new_dawn_democrat_focus
						has_variable = ut_new_dawn_core_democrat_var
					}
				}
			}
			add = 2
		}
		if = {
			limit = {
				ruler = {
					ut_ideology_new_dawn_fascist_trigger = yes
				}
			}
			add = 4
		}
	}
}

ut_new_dawn_autocrat_focus = {
	name = "ut_new_dawn_autocrat_focus"
	desc = "ut_new_dawn_autocrat_focus_desc"

	visible = { always = yes }

	possible = {
		NOT = { has_modifier = ut_new_dawn_focus_recently_changed }
		custom_tooltip = {
			text = ut_new_dawn_focus_freeze_tt
			NOT = { has_variable = ut_new_dawn_bar_freeze }
		}
		# custom_tooltip = {
		# 	text = ut_new_dawn_focus_already_selected_tt
		# 	NOT = { has_modifier = je_ut_new_dawn_autocrat_focus }
		# }
	}

	effect = {
		custom_tooltip = ut_new_dawn_focus_tt
		hidden_effect = {
			remove_modifier = je_ut_new_dawn_fascist_focus
			remove_modifier = je_ut_new_dawn_democrat_focus
			remove_modifier = je_ut_new_dawn_communist_focus
			remove_modifier = je_ut_new_dawn_autocrat_focus
		}
		add_modifier = {
			name = je_ut_new_dawn_autocrat_focus
		}
		add_modifier = {
			name = ut_new_dawn_focus_recently_changed
			days = normal_modifier_time
		}
	}
	ai_chance = {
		value = 0
		
		if = {
			limit = {
				has_modifier = je_ut_new_dawn_autocrat_focus
			}
			add = 20
		}
		if = {
			limit = {
				OR = {
					c:AUS ?= this
				}
			}
			add = 20
		}
		
		if = {
			#let's stay in power, if nothing else to bother
			limit = {
				NOT = { has_law = law_type:law_census_voting }
				NOT = { has_law = law_type:law_universal_suffrage }
				OR = {
					has_law = law_type:law_monarchy
					has_law = law_type:law_corporate_state
				}
				OR = {
					has_law = law_type:law_autocracy
					has_law = law_type:law_oligarchy
				}
			}
			add = 10
		}
		if = {
			limit = {
				ruler = {
					ut_ideology_new_dawn_autocrat_trigger = yes
				}
			}
			add = 4
		}
		if = {
			limit = {
				has_variable = je_ut_new_dawn_first_started
			}
			multiply = 0
		}
	}

}

ut_new_dawn_democrat_focus = {
	name = "ut_new_dawn_democrat_focus"
	desc = "ut_new_dawn_democrat_focus_desc"

	visible = { always = yes }

	possible = {
		NOT = { has_modifier = ut_new_dawn_focus_recently_changed }
		custom_tooltip = {
			text = ut_new_dawn_focus_freeze_tt
			NOT = { has_variable = ut_new_dawn_bar_freeze }
		}
		# custom_tooltip = {
		# 	text = ut_new_dawn_focus_already_selected_tt
		# 	NOT = { has_modifier = je_ut_new_dawn_democrat_focus }
		# }
	}

	effect = {
		custom_tooltip = ut_new_dawn_focus_tt		
		hidden_effect = {
			remove_modifier = je_ut_new_dawn_democrat_focus
			remove_modifier = je_ut_new_dawn_fascist_focus
			remove_modifier = je_ut_new_dawn_autocrat_focus
			remove_modifier = je_ut_new_dawn_communist_focus
		}
		add_modifier = {
			name = je_ut_new_dawn_democrat_focus
		}
		add_modifier = {
			name = ut_new_dawn_focus_recently_changed
			days = normal_modifier_time
		}
	}
	ai_chance = {
		value = 0
		if = {
			limit = {
				has_modifier = je_ut_new_dawn_democrat_focus
			}
			add = 20
		}
		if = {
			limit = {
				c:USA ?= this
				NOT = { exists = c:CSA }
			}
			add = 20
		}
		if = {
			limit = {
				c:GBR ?= this
				exists = c:GER
			}
			add = 20
		}
		if = {
			#Historically USA and Great Britain high "ranking"?
			limit = {
				global_country_ranking < 5
			}
			add = 4
		}
		if = {
			limit = {
				OR = {
					has_law = law_type:law_universal_suffrage
					has_law = law_type:law_census_voting
				}
			}
			add = 4
		}
		if = {
			limit = {
				ruler = {
					ut_ideology_new_dawn_democrat_trigger = yes
				}
			}
			add = 4
		}
		if = {
			#Fascist scare if democratic them self?
			limit = {
				OR = {
					has_law = law_type:law_universal_suffrage
					has_law = law_type:law_protected_speech
				}
				any_rival_country = {
					OR = {
						has_modifier = je_ut_new_dawn_fascist_focus
						has_variable = ut_new_dawn_core_fascist_var
					}
				}
			}
			add = 4
		}
		
		if = {
			#autocrat scare if democratic them self?
			limit = {
				OR = {
					has_law = law_type:law_universal_suffrage
					has_law = law_type:law_protected_speech
				}
				any_rival_country = {
					OR = {
						has_modifier = je_ut_new_dawn_autocrat_focus
						has_variable = ut_new_dawn_core_autocrat_var
					}
				}
			}
			add = 2
		}
	}
}

ut_new_dawn_communist_focus = {
	name = "ut_new_dawn_communist_focus"
	desc = "ut_new_dawn_communist_focus_desc"

	visible = { always = yes }

	possible = {
		NOT = { has_modifier = ut_new_dawn_focus_recently_changed }
		NOT = { 
			custom_tooltip = {
				text = ut_new_dawn_focus_freeze_tt
				has_variable = ut_new_dawn_bar_freeze
			}
		}
		# custom_tooltip = {
		# 	text = ut_new_dawn_focus_already_selected_tt
		# 	NOT = { has_modifier = je_ut_new_dawn_communist_focus }
		# }
	}

	effect = {		
		custom_tooltip = ut_new_dawn_focus_tt
		hidden_effect = {
			remove_modifier = je_ut_new_dawn_fascist_focus
			remove_modifier = je_ut_new_dawn_autocrat_focus
			remove_modifier = je_ut_new_dawn_democrat_focus
			remove_modifier = je_ut_new_dawn_communist_focus
		}
		add_modifier = {
			name = je_ut_new_dawn_communist_focus
		}
		add_modifier = {
			name = ut_new_dawn_focus_recently_changed
			days = normal_modifier_time
		}
	}
	ai_chance = {
		value = 0
		if = {
			limit = {
				has_modifier = je_ut_new_dawn_communist_focus
			}
			add = 20
		}
		if = {
			limit = {
				c:RUS ?= this
			}
			add = 4
		}
		if = {
			limit = {
				OR = {
					has_law = law_type:law_cooperative_ownership
					has_law = law_type:law_command_economy
				}
			}
			add = 10
		}
		
		if = {
			#Fascist scare if communist them self?
			limit = {
				OR = {
					has_law = law_type:law_cooperative_ownership
					has_law = law_type:law_command_economy
					has_law = law_type:law_right_to_associate
				}
				any_rival_country = {
					OR = {
						has_modifier = je_ut_new_dawn_fascist_focus
						has_variable = ut_new_dawn_core_fascist_var
					}
				}
			}
			add = 4
		}
		if = {
			limit = {
				ruler = {
					ut_ideology_new_dawn_communist_trigger = yes
				}
			}
			add = 4
		}
	}
}

#Autocratic Buttons

je_ut_new_dawn_emergency_powers = {
	name = "je_ut_new_dawn_emergency_powers"
	desc = "je_ut_new_dawn_emergency_powers_desc"

	possible = {
		custom_tooltip = {
			text = new_dawn_ideology_required_points_tt
			je:je_ut_new_dawn_autocratic = { 
				"scripted_bar_progress(je_ut_new_dawn_autocratic_points_bar)" >= new_dawn_ideology_required_points
			}
		}
		NOT = { has_modifier = je_ut_new_dawn_emergency_powers_mod }
	}

	effect = {
		add_modifier = {
			name = je_ut_new_dawn_emergency_powers_mod
			days = normal_modifier_time
		}
		add_radicals = {
			value = 0.01
		}
		custom_tooltip = {
			text = ut_add_new_dawn_progress_neg_25
			je:je_ut_new_dawn_autocratic = {
				add_progress = { value = -25 name = je_ut_new_dawn_autocratic_points_bar }
			}
		}
	}
	#ai always
	ai_chance = {
		value = 2
	}
}

je_ut_new_dawn_strengthen_power = {
	name = "je_ut_new_dawn_strengthen_power"
	desc = "je_ut_new_dawn_strengthen_power_desc"

	possible = {
		custom_tooltip = {
			text = new_dawn_ideology_required_points_tt
			je:je_ut_new_dawn_autocratic = { 
				"scripted_bar_progress(je_ut_new_dawn_autocratic_points_bar)" >= new_dawn_ideology_required_points
			}
		}
		NOT = { has_modifier = je_ut_new_dawn_strengthen_power_mod }
	}

	effect = {
		add_modifier = {
			name = je_ut_new_dawn_strengthen_power_mod
			days = long_modifier_time
		}
		add_radicals = {
			value = 0.01
		}
		
		custom_tooltip = {
			text = ut_add_new_dawn_progress_neg_25
			je:je_ut_new_dawn_autocratic = {
				add_progress = { value = -25 name = je_ut_new_dawn_autocratic_points_bar }
			}
		}
	}
	#ai always
	ai_chance = {
		value = 2
	}
}

je_ut_new_dawn_border_dispute = {
	name = "je_ut_new_dawn_border_dispute"
	desc = "je_ut_new_dawn_border_dispute_desc"

	possible = {
		custom_tooltip = {
			text = new_dawn_ideology_required_points_tt
			je:je_ut_new_dawn_autocratic = { 
				"scripted_bar_progress(je_ut_new_dawn_autocratic_points_bar)" >= new_dawn_ideology_required_points
			}
		}
		NOT = { has_modifier = je_ut_new_dawn_border_dispute_mod }
	}

	effect = {
		add_modifier = {
			name = je_ut_new_dawn_border_dispute_mod
			days = normal_modifier_time
		}
		add_radicals = {
			value = 0.01
		}
		
		custom_tooltip = {
			text = ut_add_new_dawn_progress_neg_25
			je:je_ut_new_dawn_autocratic = {
				add_progress = { value = -25 name = je_ut_new_dawn_autocratic_points_bar }
			}
		}
	}
	#ai only do if low infamy
	ai_chance = {
		value = 0
		if = {
			limit = {
				infamy < 5 
			}
			add = 5
		}
	}
}

je_ut_new_dawn_suppress_dissidents = {
	name = "je_ut_new_dawn_suppress_dissidents"
	desc = "je_ut_new_dawn_suppress_dissidents_desc"

	possible = {
		custom_tooltip = {
			text = new_dawn_ideology_required_points_tt
			je:je_ut_new_dawn_autocratic = { 
				"scripted_bar_progress(je_ut_new_dawn_autocratic_points_bar)" >= new_dawn_ideology_required_points
			}
		}
	}

	effect = {
		add_modifier = {
			name = je_ut_new_dawn_suppress_dissidents_mod
			days = normal_modifier_time
		}
		add_radicals = {
			value = 0.01
		}
		
		trigger_event = {
			id = event_new_dawn.30
			popup = yes
		}
		custom_tooltip = {
			text = event_new_dawn.30_tt
		}

		custom_tooltip = {
			text = ut_add_new_dawn_progress_neg_25
			je:je_ut_new_dawn_autocratic = {
				add_progress = { value = -25 name = je_ut_new_dawn_autocratic_points_bar }
			}
		}
	}

	ai_chance = {
		value = 0
		if = {
			limit = {
				government_legitimacy < 0.5
			}
			add = 5
		}
		if = {
			limit = {
				radical_fraction = {
					value >= 0.2
				}
			}
			add = 5
		}
	}
}

#Fascist Buttons
je_ut_new_dawn_outlaw_communists = {
	name = "je_ut_new_dawn_outlaw_communists"
	desc = "je_ut_new_dawn_outlaw_communists_desc"

	visible = {
		NOT = {
			has_variable = je_ut_new_dawn_outlaw_communists_done
		}
	}

	possible = {
		always = no #disabled
		custom_tooltip = {
			text = new_dawn_ideology_required_points_tt
			je:je_ut_new_dawn_fascist = { 
				"scripted_bar_progress(je_ut_new_dawn_fascist_points_bar)" >= new_dawn_ideology_required_points
			}
		}
		has_law = law_type:law_single_party_state
	}

	effect = {
		custom_tooltip = {
			text = new_dawn_ideology_required_points_spend_tt
			je:je_ut_new_dawn_fascist = {
				add_progress = { value = -50 name = je_ut_new_dawn_fascist_points_bar }
			}
		}
		set_variable = {
			name = je_ut_new_dawn_outlaw_communists_done
		}
	}
}


je_ut_new_dawn_form_paramilitary_groups = {
	name = "je_ut_new_dawn_form_paramilitary_groups"
	desc = "je_ut_new_dawn_form_paramilitary_groups_desc"

	visible = {
		NOT = {
			has_variable = je_ut_new_dawn_form_paramilitary_groups_done
		}
	}

	possible = {
		always = no #disabled
		custom_tooltip = {
			text = new_dawn_ideology_required_points_tt
			je:je_ut_new_dawn_fascist = { 
				"scripted_bar_progress(je_ut_new_dawn_fascist_points_bar)" >= new_dawn_ideology_required_points
			}
		}
		OR = {
			has_law = law_type:law_secret_police
			has_law = law_type:law_national_guard
		}
	}

	effect = {
		custom_tooltip = {
			text = new_dawn_ideology_required_points_spend_tt
			je:je_ut_new_dawn_fascist = {
				add_progress = { value = -50 name = je_ut_new_dawn_fascist_points_bar }
			}
		}
		set_variable = {
			name = je_ut_new_dawn_form_paramilitary_groups_done
		}
	}
}


je_ut_new_dawn_conformity = {
	name = "je_ut_new_dawn_conformity"
	desc = "je_ut_new_dawn_conformity_desc"

	visible = {
		NOT = {
			has_variable = je_ut_new_dawn_conformity_done
		}
	}

	possible = {
		always = no #disabled
		custom_tooltip = {
			text = new_dawn_ideology_required_points_tt
			je:je_ut_new_dawn_fascist = { 
				"scripted_bar_progress(je_ut_new_dawn_fascist_points_bar)" >= new_dawn_ideology_required_points
			}
		}
		OR = {
			has_law = law_type:law_corporate_state
			has_law = law_type:ut_law_monarchy_corporate_state
		}
		#later corporate nazi state or smth
	}

	effect = {
		custom_tooltip = {
			text = new_dawn_ideology_required_points_spend_tt
			je:je_ut_new_dawn_fascist = {
				add_progress = { value = -50 name = je_ut_new_dawn_fascist_points_bar }
			}
		}
		every_interest_group = {
			limit = {
				OR = {
					has_ideology = ideology:ideology_patriotic
					has_ideology = ideology:ideology_patriotic_democratic
					has_ideology = ideology:ideology_patriotic_fascist
				}
			}
			remove_ideology = ideology_patriotic
			hidden_effect = {
				remove_ideology = ideology_patriotic_democratic
				remove_ideology = ideology_patriotic_fascist
			}
			add_ideology = ideology_patriotic_fascist
		}
		every_interest_group = {
			limit = {
				OR = {
					has_ideology = ideology:ideology_laissez_faire
					has_ideology = ideology:ut_ideology_laissez_faire
					has_ideology = ideology:ut_ideology_laissez_faire_democratic
					has_ideology = ideology:ut_ideology_laissez_faire_democratic_neoliberal
				}
			}
			remove_ideology = ut_ideology_laissez_faire
			hidden_effect = {
				remove_ideology = ideology_laissez_faire
				remove_ideology = ut_ideology_laissez_faire_democratic
				remove_ideology = ut_ideology_laissez_faire_democratic_neoliberal
			}
			add_ideology = ut_ideology_laissez_faire_authoritarian
		}
		set_variable = {
			name = je_ut_new_dawn_conformity_done
		}
	}
}

je_ut_new_dawn_unite_heritage = {
	name = "je_ut_new_dawn_unite_heritage"
	desc = "je_ut_new_dawn_unite_heritage_desc"

	visible = {
		NOT = {
			has_variable = je_ut_new_dawn_unite_heritage_done
		}
	}

	possible = {
		always = no #disabled
		custom_tooltip = {
			text = new_dawn_ideology_required_points_tt
			je:je_ut_new_dawn_fascist = { 
				"scripted_bar_progress(je_ut_new_dawn_fascist_points_bar)" >= new_dawn_ideology_required_points
			}
		}
		custom_tooltip = {
			text = je_ut_new_dawn_unite_heritage_trigger_tt
			NOT = {
				any_state = {
					is_homeland_of_country_cultures = c:SWE
					NOT = { owner = root }
				}
			}
		}
	}

	effect = {
		custom_tooltip = {
			text = new_dawn_ideology_required_points_spend_tt
			je:je_ut_new_dawn_fascist = {
				add_progress = { value = -50 name = je_ut_new_dawn_fascist_points_bar }
			}
		}
		set_variable = {
			name = je_ut_new_dawn_unite_heritage_done
		}
	}
}

je_ut_new_dawn_volksgemeinschaft = {
	name = "je_ut_new_dawn_volksgemeinschaft"
	desc = "je_ut_new_dawn_volksgemeinschaft_desc"

	visible = {
		NOT = {
			has_variable = je_ut_new_dawn_volksgemeinschaft_done
		}
	}

	possible = {
		always = no #disabled
		custom_tooltip = {
			text = new_dawn_ideology_required_points_tt
			je:je_ut_new_dawn_fascist = { 
				"scripted_bar_progress(je_ut_new_dawn_fascist_points_bar)" >= new_dawn_ideology_required_points
			}
		}
		
		OR = {
			has_law = law_type:law_ethnostate
			has_law = law_type:law_neo_ethno_state
		}
	}

	effect = {
		custom_tooltip = {
			text = new_dawn_ideology_required_points_spend_tt
			je:je_ut_new_dawn_fascist = {
				add_progress = { value = -50 name = je_ut_new_dawn_fascist_points_bar }
			}
		}
		set_variable = {
			name = je_ut_new_dawn_volksgemeinschaft_done
		}
	}
}

je_ut_new_dawn_expansionism = {
	name = "je_ut_new_dawn_expansionism"
	desc = "je_ut_new_dawn_expansionism_desc"

	visible = {
		NOT = {
			has_variable = je_ut_new_dawn_expansionism_done
		}
	}

	possible = {
		always = no #disabled
		custom_tooltip = {
			text = new_dawn_ideology_required_points_tt
			je:je_ut_new_dawn_fascist = { 
				"scripted_bar_progress(je_ut_new_dawn_fascist_points_bar)" >= new_dawn_ideology_required_points
			}
		}
		NOT = {
			any_country = {
				OR = {
					NOT = { this = root }
					NOT = { is_subject_of = root }
				}
				has_strategic_adjacency = root
			}
		}
	}

	effect = {
		custom_tooltip = {
			text = new_dawn_ideology_required_points_spend_tt
			je:je_ut_new_dawn_fascist = {
				add_progress = { value = -50 name = je_ut_new_dawn_fascist_points_bar }
			}
		}
		set_variable = {
			name = je_ut_new_dawn_expansionism_done
		}
	}
}
