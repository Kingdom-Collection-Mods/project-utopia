####Democratic Buttons####
je_ut_new_dawn_democratic_spirit = {
	name = "je_ut_new_dawn_democratic_spirit"
	desc = "je_ut_new_dawn_democratic_spirit_desc"

	possible = {
		custom_tooltip = {
			text = new_dawn_ideology_milestone_done_tt
			NOT = { has_variable = je_ut_new_dawn_democratic_spirit_done }
		}
		custom_tooltip = {
			text = new_dawn_ideology_required_points_tt
			je:je_ut_new_dawn_democratic = { 
				"scripted_bar_progress(je_ut_new_dawn_democratic_points_bar)" >= new_dawn_ideology_required_points
			}
		}
		OR = {
			has_law_or_variant = law_type:law_parliamentary_republic
			has_law_or_variant = law_type:law_presidential_republic
			has_law = law_type:ut_law_monarchy_democratic
		}
		has_law_or_variant = law_type:law_universal_suffrage
		NOT = {
			any_interest_group = {
				is_in_government = yes
				leader = {
					OR = {
						has_ideology = ideology:ideology_fascist
						has_ideology = ideology:ideology_integralist
						has_ideology = ideology:ideology_ethno_nationalist
						has_ideology = ideology:ideology_communist
						has_ideology = ideology:ideology_vanguardist
						has_ideology = ideology:ideology_anarchist
					}
				}
			}
		}
	}

	effect = {		
		ig:ig_intelligentsia = {
			remove_ideology = ideology_liberal_modern
			hidden_effect = {
				remove_ideology = ideology_liberal
			}
			add_ideology = ideology_liberal_democratic
		}
		every_interest_group = {
			limit = {
				OR = {
					has_ideology = ideology:ideology_reactionary
					has_ideology = ideology:ideology_reactionary_communist
					has_ideology = ideology:ut_ideology_reactionary_alternative
				}
			}
			hidden_effect = {
				remove_ideology = ideology_reactionary_communist
				remove_ideology = ut_ideology_reactionary_alternative
			}
			remove_ideology = ideology_reactionary
			add_ideology = ideology_reactionary_democratic
		}
		set_variable = je_ut_new_dawn_democratic_spirit_done


		custom_tooltip = {
			text = new_dawn_ideology_required_points_spend_tt
			je:je_ut_new_dawn_democratic = {
				add_progress = { value = -50 name = je_ut_new_dawn_democratic_points_bar }
			}
		}
		if = {
			limit = {
				is_power_bloc_leader = yes
				power_bloc = {
					has_identity = identity:identity_sovereign_empire
				}
				is_ai = yes
			}
			if = {
				limit = {
					any_country = {
						is_player = no
						is_power_bloc_leader = yes
						has_modifier = ut_new_dawn_core_democratic_mod
						save_temporary_scope_as = target_country
						power_bloc ?= {
							NOT = { has_identity = identity:identity_sovereign_empire }
						}
					}
				}
				
				join_power_bloc = scope:target_country
			}
			else = {
				random_country = {
					limit = {
						is_player = no
						is_power_bloc_leader = yes
						save_temporary_scope_as = target_country
						power_bloc ?= {
							NOT = { has_identity = identity:identity_sovereign_empire }
						}
					}
					root = {
						join_power_bloc = scope:target_country
					}
				}
			}
		}
	}

	ai_chance = {
		value = 10
	}
}

je_ut_new_dawn_democratic_cultural_values = {
	name = "je_ut_new_dawn_democratic_cultural_values"
	desc = "je_ut_new_dawn_democratic_cultural_values_desc"

	possible = {
		custom_tooltip = {
			text = new_dawn_ideology_milestone_done_tt
			NOT = { has_variable = je_ut_new_dawn_democratic_cultural_values_done }
		}
		custom_tooltip = {
			text = new_dawn_ideology_required_points_tt
			je:je_ut_new_dawn_democratic = { 
				"scripted_bar_progress(je_ut_new_dawn_democratic_points_bar)" >= new_dawn_ideology_required_points
			}
		}
        OR = {
            has_law = law_type:law_protected_speech
            has_law = law_type:law_right_of_assembly
        }
		has_law = law_type:law_guaranteed_liberties
		ig:ig_devout = {
			OR = {
				is_marginal = yes
				custom_tooltip = {
					text = concept_ut_nd_democrat_interest_group_tt
					leader = {
						ut_ideology_new_dawn_democrat_trigger = yes
					}
				}
			}
		}
		ig:ig_industrialists = {
			OR = {
				is_marginal = yes
				custom_tooltip = {
					text = concept_ut_nd_democrat_interest_group_tt
					leader = {
						ut_ideology_new_dawn_democrat_trigger = yes
					}
				}
			}
		}
	}

	effect = {
		custom_tooltip = ut_influence_new_dawn_major_power_unlock_tt
		every_interest_group = {
			limit = {
				OR = {
					has_ideology = ideology:ideology_laissez_faire
					has_ideology = ideology:ut_ideology_laissez_faire
					has_ideology = ideology:ut_ideology_laissez_faire_authoritarian
				}
			}
			remove_ideology = ideology_laissez_faire
			hidden_effect = {
				remove_ideology = ut_ideology_laissez_faire
				remove_ideology = ut_ideology_laissez_faire_authoritarian
			}
			
			if = {
				limit = {
					owner = {
						has_technology_researched = political_progress_3_neoliberalism
					}
				}
				add_ideology = ut_ideology_laissez_faire_democratic_neoliberal
			}
			else = {
				add_ideology = ut_ideology_laissez_faire_democratic	
			}
		}
		ig:ig_industrialists = {
			remove_ideology = ideology_plutocratic
			hidden_effect = {
				remove_ideology = ideology_plutocratic_communist
				remove_ideology = ideology_plutocratic_alternative
			}
			add_ideology = ideology_plutocratic_democratic
		}
		set_variable = je_ut_new_dawn_democratic_cultural_values_done


		custom_tooltip = {
			text = new_dawn_ideology_required_points_spend_tt
			je:je_ut_new_dawn_democratic = {
				add_progress = { value = -50 name = je_ut_new_dawn_democratic_points_bar }
			}
		}
	}

	ai_chance = {
		value = 10
	}
}

je_ut_new_dawn_democratic_power_bloc = {
	name = "je_ut_new_dawn_democratic_power_bloc"
	desc = "je_ut_new_dawn_democratic_power_bloc_desc"

	possible = {
		custom_tooltip = {
			text = new_dawn_ideology_milestone_done_tt
			NOT = { has_variable = je_ut_new_dawn_democratic_power_bloc_done }
		}
		custom_tooltip = {
			text = new_dawn_ideology_required_points_tt
			je:je_ut_new_dawn_democratic = { 
				"scripted_bar_progress(je_ut_new_dawn_democratic_points_bar)" >= new_dawn_ideology_required_points
			}
		}
		is_subject = no
		is_in_power_bloc = yes
		power_bloc ?= {
			NOT = { has_principle_group = principle_group:principle_group_exploit_members }
			power_bloc_leader = {
				has_modifier = ut_new_dawn_core_democratic_mod
			}
		}
	}

	effect = {
		set_variable = je_ut_new_dawn_democratic_power_bloc_done
		ig:ig_armed_forces = {
			remove_ideology = ideology_jingoist
			add_ideology = ideology_jingoist_democratic
		}
		every_interest_group = {
			limit = {
				OR = {
					has_ideology = ideology:ideology_patriotic
					has_ideology = ideology:ideology_patriotic_democratic
					has_ideology = ideology:ideology_patriotic_fascist
				}
			}
			remove_ideology = ideology_patriotic
			hidden_effect = {
				remove_ideology = ideology_patriotic_democratic
				remove_ideology = ideology_patriotic_fascist
			}
			add_ideology = ideology_patriotic_democratic
		}
		add_modifier = {
			name = je_ut_new_dawn_democratic_power_bloc_mod
		}

		
		custom_tooltip = {
			text = new_dawn_ideology_required_points_spend_tt
			je:je_ut_new_dawn_democratic = {
				add_progress = { value = -50 name = je_ut_new_dawn_democratic_points_bar }
			}
		}
	}

	ai_chance = {
		value = 10
	}
}

je_ut_new_dawn_democratic_fair_elections = {
	name = "je_ut_new_dawn_democratic_fair_elections"
	desc = "je_ut_new_dawn_democratic_fair_elections_desc"

	possible = {
		custom_tooltip = {
			text = new_dawn_ideology_milestone_done_tt
			NOT = { has_variable = je_ut_new_dawn_democratic_fair_elections_done }
		}
		custom_tooltip = {
			text = new_dawn_ideology_required_points_tt
			je:je_ut_new_dawn_democratic = { 
				"scripted_bar_progress(je_ut_new_dawn_democratic_points_bar)" >= new_dawn_ideology_required_points
			}
		}
		has_law_or_variant = law_type:law_universal_suffrage
		custom_tooltip = {
			text = je_ut_new_dawn_democratic_fair_elections_trigger_tt
			var:je_ut_new_dawn_democratic_fair_elections_var >= 20
		}
	}

	effect = {
		set_variable = je_ut_new_dawn_democratic_fair_elections_done		
		set_variable = {
			name = je_ut_new_dawn_democratic_fair_elections_var
			value = 0
		}
		add_modifier = {
			name = je_ut_new_dawn_democratic_fair_elections_mod
		}
		ig:ig_devout = {
			remove_ideology = ideology_moralist
			add_ideology = ideology_moralist_democratic
		}

		ig:ig_trade_unions = {
			remove_ideology = ideology_socialist
			add_ideology = ideology_socialist_democratic
		}
		
		custom_tooltip = {
			text = new_dawn_ideology_required_points_spend_tt
			je:je_ut_new_dawn_democratic = {
				add_progress = { value = -50 name = je_ut_new_dawn_democratic_points_bar }
			}
		}
	}

	ai_chance = {
		value = 10
	}
}
