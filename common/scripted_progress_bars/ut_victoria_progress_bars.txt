###based on je_divided_monarchists by Paradox

ut_new_dawn_fascist_bar = {
	name = "ut_new_dawn_fascist_bar"
	desc = "ut_new_dawn_fascist_bar_desc"

	#for color
	default_green = yes

	monthly_progress = {
		if = {
			limit = {
				NOT = {
					has_variable = ut_new_dawn_bar_freeze #This variable stops iteration, and is granted by reaching 360 with one dynasty. It's reset when this JE is completed, or when je_cement_the_rightful_dynasty fails.
				}
			}
			add = {
				desc = "ut_nd_fascist_progress_from_characters"
				value = owner.var:ut_nd_fascist_progress_from_characters
			}
			add = {
				desc = "ut_nd_fascist_progress_from_igs"
				value = owner.var:ut_nd_fascist_progress_from_igs
			}
			add = {
				desc = "ut_nd_fascist_progress_from_legitimacy"
				value = owner.var:ut_nd_fascist_progress_from_legitimacy
			}
			add = {
				desc = "ut_nd_fascist_progress_from_laws"
				value = owner.var:ut_nd_fascist_progress_from_laws
			}
			add = {
				desc = "ut_nd_fascist_progress_from_focus"
				value = owner.var:ut_nd_fascist_progress_from_focus
			}
			add = {
				desc = "ut_nd_fascist_progress_from_events"
				value = owner.var:ut_nd_fascist_progress_from_events
			}
			if = {
				limit = {
					is_ai = yes
				}
				multiply = 2
			}
			else = {
				if ={
					limit = {
						pop_type_percent_country = {
							pop_type = service_workers
							percent < 0.01
						}
					}
					multiply = {
						desc = "ut_nd_multiplier_from_service_workers_0"
						value = 0.5
					}
				}
				else_if = {
					limit = {
						pop_type_percent_country = {
							pop_type = service_workers
							percent < 0.02
						}
					}
					multiply = {
						desc = "ut_nd_multiplier_from_service_workers_1"
						value = 1.5
					}
				}
				else_if = {
					limit = {
						pop_type_percent_country = {
							pop_type = service_workers
							percent < 0.03
						}
					}
					multiply = {
						desc = "ut_nd_multiplier_from_service_workers_2"
						value = 2
					}
				}
				else_if = {
					limit = {
						pop_type_percent_country = {
							pop_type = service_workers
							percent < 0.04
						}
					}
					multiply = {
						desc = "ut_nd_multiplier_from_service_workers_3"
						value = 2.5
					}				
				}
				else = {
					multiply = {
						desc = "ut_nd_multiplier_from_service_workers_4"
						value = 3
					}
				}
			}
		}
		else = {
			add = {
				desc = "ut_nd_decaying_progress"
				value = -0.5
			}
		}
	}

	start_value = 0
	min_value = 0
	max_value = 240 # new_dawn_core_upper_bound

}

ut_new_dawn_democrat_bar = {
	name = "ut_new_dawn_democrat_bar"
	desc = "ut_new_dawn_democrat_bar_desc"

	#for color
	default = yes

	monthly_progress = {
		if = {
			limit = {
				NOT = {
					has_variable = ut_new_dawn_bar_freeze #This variable stops iteration, and is granted by reaching 360 with one dynasty. It's reset when this JE is completed, or when je_cement_the_rightful_dynasty fails.
				}
			}
			add = {
				desc = "ut_nd_democrat_progress_from_characters"
				value = owner.var:ut_nd_democrat_progress_from_characters
			}
			add = {
				desc = "ut_nd_democrat_progress_from_igs"
				value = owner.var:ut_nd_democrat_progress_from_igs
			}
			add = {
				desc = "ut_nd_democrat_progress_from_laws"
				value = owner.var:ut_nd_democrat_progress_from_laws
			}
			add = {
				desc = "ut_nd_democrat_progress_from_legitimacy"
				value = owner.var:ut_nd_democrat_progress_from_legitimacy
			}
			add = {
				desc = "ut_nd_democrat_progress_from_focus"
				value = owner.var:ut_nd_democrat_progress_from_focus
			}
			add = {
				desc = "ut_nd_democrat_progress_from_events"
				value = owner.var:ut_nd_democrat_progress_from_events
			}
			
			if = {
				limit = {
					is_ai = yes
				}
				multiply = 2
			}
			else = {
				if ={
					limit = {
						pop_type_percent_country = {
							pop_type = service_workers
							percent < 0.01
						}
					}
					multiply = {
						desc = "ut_nd_multiplier_from_service_workers_0"
						value = 0.5
					}
				}
				else_if = {
					limit = {
						pop_type_percent_country = {
							pop_type = service_workers
							percent < 0.02
						}
					}
					multiply = {
						desc = "ut_nd_multiplier_from_service_workers_1"
						value = 1.5
					}
				}
				else_if = {
					limit = {
						pop_type_percent_country = {
							pop_type = service_workers
							percent < 0.03
						}
					}
					multiply = {
						desc = "ut_nd_multiplier_from_service_workers_2"
						value = 2
					}
				}
				else_if = {
					limit = {
						pop_type_percent_country = {
							pop_type = service_workers
							percent < 0.04
						}
					}
					multiply = {
						desc = "ut_nd_multiplier_from_service_workers_3"
						value = 2.5
					}				
				}
				else = {
					multiply = {
						desc = "ut_nd_multiplier_from_service_workers_4"
						value = 3
					}
				}
			}
		}
		else = {			
			add = {
				desc = "ut_nd_decaying_progress"
				value = -0.5
			}
		}
	}

	start_value = 0
	min_value = 0
	max_value = 240 # new_dawn_core_upper_bound

}

ut_new_dawn_communist_bar = {
	name = "ut_new_dawn_communist_bar"
	desc = "ut_new_dawn_communist_bar_desc"

	#for color
	default_bad = yes

	monthly_progress = {
		if = {
			limit = {
				NOT = {
					has_variable = ut_new_dawn_bar_freeze #This variable stops iteration, and is granted by reaching 360 with one dynasty. It's reset when this JE is completed, or when je_cement_the_rightful_dynasty fails.
				}
			}
			add = {
				desc = "ut_nd_communist_progress_from_characters"
				value = owner.var:ut_nd_communist_progress_from_characters
			}
			add = {
				desc = "ut_nd_communist_progress_from_igs"
				value = owner.var:ut_nd_communist_progress_from_igs
			}
			add = {
				desc = "ut_nd_communist_progress_from_legitimacy"
				value = owner.var:ut_nd_communist_progress_from_legitimacy
			}
			add = {
				desc = "ut_nd_communist_progress_from_laws"
				value = owner.var:ut_nd_communist_progress_from_laws
			}
			add = {
				desc = "ut_nd_communist_progress_from_focus"
				value = owner.var:ut_nd_communist_progress_from_focus
			}
			add = {
				desc = "ut_nd_communist_progress_from_events"
				value = owner.var:ut_nd_communist_progress_from_events
			}
			if = {
				limit = {
					is_ai = yes
				}
				multiply = 2
			}
			else = {
				if ={
					limit = {
						pop_type_percent_country = {
							pop_type = service_workers
							percent < 0.01
						}
					}
					multiply = {
						desc = "ut_nd_multiplier_from_service_workers_0"
						value = 0.5
					}
				}
				else_if = {
					limit = {
						pop_type_percent_country = {
							pop_type = service_workers
							percent < 0.02
						}
					}
					multiply = {
						desc = "ut_nd_multiplier_from_service_workers_1"
						value = 1.5
					}
				}
				else_if = {
					limit = {
						pop_type_percent_country = {
							pop_type = service_workers
							percent < 0.03
						}
					}
					multiply = {
						desc = "ut_nd_multiplier_from_service_workers_2"
						value = 2
					}
				}
				else_if = {
					limit = {
						pop_type_percent_country = {
							pop_type = service_workers
							percent < 0.04
						}
					}
					multiply = {
						desc = "ut_nd_multiplier_from_service_workers_3"
						value = 2.5
					}				
				}
				else = {
					multiply = {
						desc = "ut_nd_multiplier_from_service_workers_4"
						value = 3
					}
				}
			}
		}
		else = {
			add = {
				desc = "ut_nd_decaying_progress"
				value = -0.5
			}
		}
	}

	start_value = 0
	min_value = 0
	max_value = 240 # new_dawn_core_upper_bound

}

ut_new_dawn_autocrat_bar = {
	name = "ut_new_dawn_autocrat_bar"
	desc = "ut_new_dawn_autocrat_bar_desc"

	default = yes

	monthly_progress = {
		if = {
			limit = {
				NOT = {
					has_variable = ut_new_dawn_bar_freeze #This variable stops iteration, and is granted by reaching 360 with one dynasty. It's reset when this JE is completed, or when je_cement_the_rightful_dynasty fails.
				}
			}
			add = {
				desc = "ut_nd_autocrat_progress_from_characters"
				value = owner.var:ut_nd_autocrat_progress_from_characters
			}
			add = {
				desc = "ut_nd_autocrat_progress_from_igs"
				value = owner.var:ut_nd_autocrat_progress_from_igs
			}
			add = {
				desc = "ut_nd_autocrat_progress_from_legitimacy"
				value = owner.var:ut_nd_autocrat_progress_from_legitimacy
			}
			add = {
				desc = "ut_nd_autocrat_progress_from_laws"
				value = owner.var:ut_nd_autocrat_progress_from_laws
			}
			add = {
				desc = "ut_nd_autocrat_progress_from_focus"
				value = owner.var:ut_nd_autocrat_progress_from_focus
			}
			add = {
				desc = "ut_nd_autocrat_progress_from_events"
				value = owner.var:ut_nd_autocrat_progress_from_events
			}
			if = {
				limit = {
					is_ai = yes
				}
				multiply = 2
			}
			else = {
				if ={
					limit = {
						pop_type_percent_country = {
							pop_type = service_workers
							percent < 0.01
						}
					}
					multiply = {
						desc = "ut_nd_multiplier_from_service_workers_0"
						value = 0.5
					}
				}
				else_if = {
					limit = {
						pop_type_percent_country = {
							pop_type = service_workers
							percent < 0.02
						}
					}
					multiply = {
						desc = "ut_nd_multiplier_from_service_workers_1"
						value = 1.5
					}
				}
				else_if = {
					limit = {
						pop_type_percent_country = {
							pop_type = service_workers
							percent < 0.03
						}
					}
					multiply = {
						desc = "ut_nd_multiplier_from_service_workers_2"
						value = 2
					}
				}
				else_if = {
					limit = {
						pop_type_percent_country = {
							pop_type = service_workers
							percent < 0.04
						}
					}
					multiply = {
						desc = "ut_nd_multiplier_from_service_workers_3"
						value = 2.5
					}				
				}
				else = {
					multiply = {
						desc = "ut_nd_multiplier_from_service_workers_4"
						value = 3
					}
				}
			}
		}
		else = {
			add = {
				desc = "ut_nd_decaying_progress"
				value = -0.5
			}
		}
	}

	start_value = 0
	min_value = 0
	max_value = 240 # new_dawn_core_upper_bound

}

### yes naming absolutely - absolutistic ly makes sense /s
je_ut_new_dawn_democratic_points_bar = {
	name = "je_ut_new_dawn_points_bar"
	desc = "je_ut_new_dawn_points_bar_desc"

	default = yes

	monthly_progress = {
		if = {
			limit = {
				always = yes
				# is_player = yes
			}
			
			add = {
				desc = "ut_nd_democrat_progress_from_characters"
				value = owner.var:ut_nd_democrat_progress_from_characters
			}
			add = {
				desc = "ut_nd_democrat_progress_from_igs"
				value = owner.var:ut_nd_democrat_progress_from_igs
			}
			add = {
				desc = "ut_nd_democrat_progress_from_laws"
				value = owner.var:ut_nd_democrat_progress_from_laws
			}
			add = {
				desc = "ut_nd_democrat_progress_from_legitimacy"
				value = owner.var:ut_nd_democrat_progress_from_legitimacy
			}
			add = {
				desc = "ut_nd_democrat_progress_from_events"
				value = owner.var:ut_nd_democrat_progress_from_events
			}
			multiply = {
				desc = "ut_new_dawn_phase_2_progress_modifier"
				value = 0.25
			}	
		}
	}

	start_value = 50
	min_value = 0
	max_value = 100 # new_dawn_core_upper_bound
}

je_ut_new_dawn_autocratic_points_bar = {
	name = "je_ut_new_dawn_points_bar"
	desc = "je_ut_new_dawn_points_bar_desc"

	default = yes

	monthly_progress = {
		if = {
			limit = {
				always = yes
				#is_player = yes
				#NOT = {
				#	has_variable = ut_new_dawn_bar_freeze #This variable stops iteration, and is granted by reaching 360 with one dynasty. It's reset when this JE is completed, or when je_cement_the_rightful_dynasty fails.
				#}
			}
			
			add = {
				desc = "ut_nd_autocrat_progress_from_characters"
				value = owner.var:ut_nd_autocrat_progress_from_characters
			}
			add = {
				desc = "ut_nd_autocrat_progress_from_igs"
				value = owner.var:ut_nd_autocrat_progress_from_igs
			}
			add = {
				desc = "ut_nd_autocrat_progress_from_laws"
				value = owner.var:ut_nd_autocrat_progress_from_laws
			}
			add = {
				desc = "ut_nd_autocrat_progress_from_legitimacy"
				value = owner.var:ut_nd_autocrat_progress_from_legitimacy
			}
			add = {
				desc = "ut_nd_autocrat_progress_from_events"
				value = owner.var:ut_nd_autocrat_progress_from_events
			}
			multiply = {
				desc = "ut_new_dawn_phase_2_progress_modifier"
				value = 0.25
			}	
		}
		else = {
			add = 0
		}
	}

	start_value = 50
	min_value = 0
	max_value = 100 # new_dawn_core_upper_bound
}

je_ut_new_dawn_fascist_points_bar = {
	name = "je_ut_new_dawn_points_bar"
	desc = "je_ut_new_dawn_points_bar_desc"

	default = yes

	monthly_progress = {
		if = {
			limit = {
				#is_player = yes
				always = yes
				#NOT = {
				#	has_variable = ut_new_dawn_bar_freeze #This variable stops iteration, and is granted by reaching 360 with one dynasty. It's reset when this JE is completed, or when je_cement_the_rightful_dynasty fails.
				#}
			}
			
			add = {
				desc = "ut_nd_fascist_progress_from_characters"
				value = owner.var:ut_nd_fascist_progress_from_characters
			}
			add = {
				desc = "ut_nd_fascist_progress_from_igs"
				value = owner.var:ut_nd_fascist_progress_from_igs
			}
			add = {
				desc = "ut_nd_fascist_progress_from_laws"
				value = owner.var:ut_nd_fascist_progress_from_laws
			}
			add = {
				desc = "ut_nd_fascist_progress_from_legitimacy"
				value = owner.var:ut_nd_fascist_progress_from_legitimacy
			}
			add = {
				desc = "ut_nd_fascist_progress_from_events"
				value = owner.var:ut_nd_fascist_progress_from_events
			}
			multiply = {
				desc = "ut_new_dawn_phase_2_progress_modifier"
				value = 0.25
			}	
		}
		else = {
			add = 0
		}
	}

	start_value = 50
	min_value = 0
	max_value = 100 # new_dawn_core_upper_bound
}

je_ut_new_dawn_communist_points_bar = {
	name = "je_ut_new_dawn_points_bar"
	desc = "je_ut_new_dawn_points_bar_desc"

	default = yes

	monthly_progress = {
		if = {
			limit = {
				always = yes
				#is_player = yes
				#NOT = {
				#	has_variable = ut_new_dawn_bar_freeze #This variable stops iteration, and is granted by reaching 360 with one dynasty. It's reset when this JE is completed, or when je_cement_the_rightful_dynasty fails.
				#}
			}
			
			add = {
				desc = "ut_nd_communist_progress_from_characters"
				value = owner.var:ut_nd_communist_progress_from_characters
			}
			add = {
				desc = "ut_nd_communist_progress_from_igs"
				value = owner.var:ut_nd_communist_progress_from_igs
			}
			add = {
				desc = "ut_nd_communist_progress_from_laws"
				value = owner.var:ut_nd_communist_progress_from_laws
			}
			add = {
				desc = "ut_nd_communist_progress_from_legitimacy"
				value = owner.var:ut_nd_communist_progress_from_legitimacy
			}
			add = {
				desc = "ut_nd_communist_progress_from_events"
				value = owner.var:ut_nd_communist_progress_from_events
			}
			multiply = {
				desc = "ut_new_dawn_phase_2_progress_modifier"
				value = 0.25
			}	
		}
		else = {
			add = 0
		}
	}

	start_value = 50
	min_value = 0
	max_value = 100 # new_dawn_core_upper_bound
}